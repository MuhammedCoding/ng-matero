!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,s,i){return s&&n(e.prototype,s),i&&n(e,i),e}(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[86],{64086:function(n,i,t){"use strict";t.r(i),t.d(i,{PermissionsModule:function(){return J}});var o=t(35848),r=t(63423),u=t(79765),c=t(46782),a=t(37716),l=t(19659),m=t(32802),g=t(42542),p=t(3679),d=t(38583),h=function(){var n=function(){function n(s,i){e(this,n),this.rolesSrv=s,this.permissionsSrv=i,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new u.xQ}return s(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe((0,c.R)(this._destroy$)).subscribe(function(e){console.log(e)}),this.permissionsSrv.permissions$.pipe((0,c.R)(this._destroy$)).subscribe(function(e){console.log(e)})}},{key:"ngOnDestroy",value:function(){this._destroy$.next(),this._destroy$.complete()}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(a.Y36(l.cM),a.Y36(l.YI))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(a._UZ(0,"page-header"),a.TgZ(1,"p"),a._uU(2," The permissions management is powered by "),a.TgZ(3,"a",0),a.TgZ(4,"code"),a._uU(5,"ngx-permissions"),a.qZA(),a.qZA(),a._uU(6,".\n"),a.qZA(),a.TgZ(7,"mat-button-toggle-group",1),a.NdJ("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),a.TgZ(8,"mat-button-toggle",2),a._uU(9,"ADMIN"),a.qZA(),a.TgZ(10,"mat-button-toggle",3),a._uU(11,"MANAGER"),a.qZA(),a.TgZ(12,"mat-button-toggle",4),a._uU(13,"GUEST"),a.qZA(),a.qZA(),a.TgZ(14,"p"),a._uU(15," Your current role: "),a.TgZ(16,"code"),a._uU(17),a.ALo(18,"json"),a.qZA(),a.qZA(),a.TgZ(19,"p"),a._uU(20," Your current permissions: "),a.TgZ(21,"code"),a._uU(22),a.ALo(23,"json"),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Q6J("ngModel",n.currentRole),a.xp6(10),a.Oqu(a.lcZ(18,3,n.currentRole)),a.xp6(5),a.Oqu(a.lcZ(23,5,n.currentPermissions)))},directives:[m.q,g.A9,p.JJ,p.On,g.Yi],pipes:[d.Ts],styles:[""]}),n}(),Z=function(){var n=function(){function n(s,i,t){e(this,n),this.rolesSrv=s,this.permissionsSrv=i,this.router=t,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}return s(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}]),n}();return n.\u0275fac=function(e){return new(e||n)(a.Y36(l.cM),a.Y36(l.YI),a.Y36(r.F0))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(a._UZ(0,"page-header"),a.TgZ(1,"p"),a._uU(2," The route will be redirected to dashboard after change permission.\n"),a.qZA(),a.TgZ(3,"mat-button-toggle-group",0),a.NdJ("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),a.TgZ(4,"mat-button-toggle",1),a._uU(5,"ADMIN"),a.qZA(),a.TgZ(6,"mat-button-toggle",2),a._uU(7,"MANAGER"),a.qZA(),a.TgZ(8,"mat-button-toggle",3),a._uU(9,"GUEST"),a.qZA(),a.qZA(),a.TgZ(10,"p"),a._uU(11," Your current role: "),a.TgZ(12,"code"),a._uU(13),a.ALo(14,"json"),a.qZA(),a.qZA(),a.TgZ(15,"p"),a._uU(16," Your current permissions: "),a.TgZ(17,"code"),a._uU(18),a.ALo(19,"json"),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Q6J("ngModel",n.currentRole),a.xp6(10),a.Oqu(a.lcZ(14,3,n.currentRole)),a.xp6(5),a.Oqu(a.lcZ(19,5,n.currentPermissions)))},directives:[m.q,g.A9,p.JJ,p.On,g.Yi],pipes:[d.Ts],styles:[""]}),n}(),A=t(70218);function f(e,n){1&e&&(a.TgZ(0,"p",11),a._uU(1," I should see it only admin "),a.qZA())}function T(e,n){1&e&&(a.TgZ(0,"p",11),a._uU(1," Usage on both only and except I should see it only admin "),a.qZA())}function P(e,n){1&e&&(a.TgZ(0,"p",12),a._uU(1,"I will see it only guest"),a.qZA())}function x(e,n){1&e&&(a.TgZ(0,"p",13),a._uU(1,"I will see it except adminnnnn"),a.qZA())}function v(e,n){1&e&&(a.TgZ(0,"p",14),a._uU(1,"I should see it except admin"),a.qZA())}function y(e,n){1&e&&(a.TgZ(0,"div"),a._uU(1," Testing template\n"),a.qZA())}function b(e,n){1&e&&(a.TgZ(0,"div"),a._uU(1," Testing template\n"),a.qZA())}function q(e,n){1&e&&(a.TgZ(0,"p",15),a._uU(1,"else block"),a.qZA())}function U(e,n){1&e&&(a.TgZ(0,"p",16),a._uU(1,"then block"),a.qZA())}function _(e,n){1&e&&(a.TgZ(0,"button"),a._uU(1," This should be visible to admin or superadmin "),a.qZA())}function O(e,n){1&e&&(a.TgZ(0,"button"),a._uU(1,"WTF"),a.qZA())}var R,k,E=function(){return["admin"]},M=function(){return["guest"]},N=function(){return["adminnnnn"]},S=function(){return[]},Y=[{path:"role-switching",component:h},{path:"route-guard",component:Z,canActivate:[l.DD],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(R=function(){function n(s){e(this,n),this.permissionsSrv=s,this.comparedPermission=["guest"]}return s(n,[{key:"ngOnInit",value:function(){}},{key:"getPermissions",value:function(){return Object.keys(this.permissionsSrv.getPermissions())}},{key:"addPermission",value:function(){this.permissionsSrv.addPermission("admin",function(){return new Promise(function(e,n){setTimeout(function(){return e(!0)},2e3)})})}},{key:"removePermission",value:function(){this.permissionsSrv.removePermission("admin")}},{key:"unAuthorized",value:function(){console.log("unAuthorized")}},{key:"authorized",value:function(){console.log("authorizes")}},{key:"changeToAdmin",value:function(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}},{key:"changeToAnotherPermission",value:function(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}},{key:"changeToGuest",value:function(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}]),n}(),R.\u0275fac=function(e){return new(e||R)(a.Y36(l.YI))},R.\u0275cmp=a.Xpm({type:R,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,n){if(1&e&&(a._UZ(0,"page-header"),a.TgZ(1,"mtx-alert",0),a._uU(2,"The permissions check will delay 2s."),a.qZA(),a.TgZ(3,"p"),a.TgZ(4,"button",1),a.NdJ("click",function(){return n.addPermission()}),a._uU(5,"Add Permission [ admin ]"),a.qZA(),a.TgZ(6,"button",1),a.NdJ("click",function(){return n.removePermission()}),a._uU(7,"Remove Permission [ admin ]"),a.qZA(),a.qZA(),a.YNc(8,f,2,0,"ng-template",2),a.YNc(9,T,2,0,"ng-template",3),a.YNc(10,P,2,0,"ng-template",2),a.YNc(11,x,2,0,"ng-template",4),a.NdJ("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),a.YNc(12,v,2,0,"ng-template",5),a.YNc(13,y,2,0,"div",6),a.YNc(14,b,2,0,"div",7),a.YNc(15,q,2,0,"ng-template",null,8,a.W1O),a.YNc(17,U,2,0,"ng-template",null,9,a.W1O),a.TgZ(19,"p"),a._uU(20," Compared permission: "),a.TgZ(21,"code"),a._uU(22),a.ALo(23,"json"),a.qZA(),a.qZA(),a.TgZ(24,"div"),a.TgZ(25,"button",1),a.NdJ("click",function(){return n.changeToAdmin()}),a._uU(26,"Change To Admin Permission"),a.qZA(),a.TgZ(27,"button",1),a.NdJ("click",function(){return n.changeToAnotherPermission()}),a._uU(28,"Change To Awesome Permission"),a.qZA(),a.TgZ(29,"button",1),a.NdJ("click",function(){return n.changeToGuest()}),a._uU(30,"Change To Guest Permission"),a.qZA(),a.qZA(),a.TgZ(31,"div"),a.YNc(32,_,2,0,"button",10),a.YNc(33,O,2,0,"button",10),a.qZA(),a.TgZ(34,"p"),a._uU(35," Your current permissions: "),a.TgZ(36,"code"),a._uU(37),a.ALo(38,"json"),a.qZA(),a.qZA()),2&e){var s=a.MAs(16),i=a.MAs(18);a.xp6(8),a.Q6J("ngxPermissionsOnly",a.DdM(20,E)),a.xp6(1),a.Q6J("ngxPermissionsOnly",a.DdM(21,E))("ngxPermissionsExcept","hhhhh"),a.xp6(1),a.Q6J("ngxPermissionsOnly",a.DdM(22,M)),a.xp6(1),a.Q6J("ngxPermissionsExcept",a.DdM(23,N)),a.xp6(1),a.Q6J("ngxPermissionsExcept",a.DdM(24,E)),a.xp6(1),a.Q6J("ngxPermissionsOnly",a.DdM(25,E))("ngxPermissionsOnlyElse",s)("ngxPermissionsOnlyThen",i),a.xp6(1),a.Q6J("ngxPermissionsExcept",a.DdM(26,E))("ngxPermissionsExceptElse",s)("ngxPermissionsExceptThen",i),a.xp6(8),a.Oqu(a.lcZ(23,16,n.comparedPermission)),a.xp6(10),a.Q6J("ngxPermissionsOnly",n.comparedPermission),a.xp6(1),a.Q6J("ngxPermissionsOnly",a.DdM(27,S)),a.xp6(4),a.Oqu(a.lcZ(38,18,n.getPermissions()))}},directives:[m.q,A.S,l.gE],pipes:[d.Ts],styles:[""]}),R),canActivate:[l.DD],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}],w=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[r.Bz.forChild(Y)],r.Bz]}),n}(),J=((k=function n(){e(this,n)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=a.oAB({type:k}),k.\u0275inj=a.cJS({imports:[[o.m,w]]}),k)}}])}();