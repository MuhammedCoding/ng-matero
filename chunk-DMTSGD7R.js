import{a as j,b as F,c as G}from"./chunk-TUTFY6TV.js";import{Db as I,Jb as N,Ub as D,gc as E,hc as O,ic as re,jc as U,kc as me,r as se,sc as C}from"./chunk-IC5JSZUH.js";import{$b as Z,Ac as P,Db as S,Fb as h,Fc as z,Hb as q,Ia as u,Ja as g,Jb as Q,Mb as X,Nc as ie,Qb as t,Ra as J,Rb as o,Rc as ne,Sb as T,Wb as w,Zb as p,ac as ee,bc as te,ha as V,hd as y,ic as B,jc as i,kc as x,mb as a,md as oe,na as Y,nb as d,nc as M,o as H,oc as A,pc as k,rc as b,sc as f,wa as $,xa as v,ya as L,zb as K,zc as _}from"./chunk-Z4SNPT5X.js";var le=(()=>{let e=class e{constructor(m,r){this.rolesSrv=m,this.permissionsSrv=r,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new H}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(V(this._destroy$)).subscribe(m=>{console.log(m)}),this.permissionsSrv.permissions$.pipe(V(this._destroy$)).subscribe(m=>{console.log(m)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}};e.\u0275fac=function(r){return new(r||e)(d(O),d(E))},e.\u0275cmp=v({type:e,selectors:[["app-permissions-role-switching"]],standalone:!0,features:[b],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(r,s){r&1&&(T(0,"page-header"),t(1,"p"),i(2," The permissions management is powered by "),t(3,"a",0)(4,"code"),i(5,"ngx-permissions"),o()(),i(6,`.
`),o(),t(7,"mat-button-toggle-group",1),k("ngModelChange",function(l){return A(s.currentRole,l)||(s.currentRole=l),l}),p("change",function(){return s.onPermissionChange()}),t(8,"mat-button-toggle",2),i(9,"ADMIN"),o(),t(10,"mat-button-toggle",3),i(11,"MANAGER"),o(),t(12,"mat-button-toggle",4),i(13,"GUEST"),o()(),t(14,"p"),i(15," Your current role: "),t(16,"code"),i(17),_(18,"json"),o()(),t(19,"p"),i(20," Your current permissions: "),t(21,"code"),i(22),_(23,"json"),o()()),r&2&&(a(7),M("ngModel",s.currentRole),a(10),x(P(18,3,s.currentRole)),a(5),x(P(23,5,s.currentPermissions)))},dependencies:[y,D,I,N,G,j,F,C]});let n=e;return n})();var ce=(()=>{let e=class e{constructor(m,r,s){this.rolesSrv=m,this.permissionsSrv=r,this.router=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}};e.\u0275fac=function(r){return new(r||e)(d(O),d(E),d(se))},e.\u0275cmp=v({type:e,selectors:[["app-permissions-route-guard"]],standalone:!0,features:[b],decls:20,vars:7,consts:[[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(r,s){r&1&&(T(0,"page-header"),t(1,"p"),i(2,` The route will be redirected to dashboard after change permission.
`),o(),t(3,"mat-button-toggle-group",0),k("ngModelChange",function(l){return A(s.currentRole,l)||(s.currentRole=l),l}),p("change",function(){return s.onPermissionChange()}),t(4,"mat-button-toggle",1),i(5,"ADMIN"),o(),t(6,"mat-button-toggle",2),i(7,"MANAGER"),o(),t(8,"mat-button-toggle",3),i(9,"GUEST"),o()(),t(10,"p"),i(11," Your current role: "),t(12,"code"),i(13),_(14,"json"),o()(),t(15,"p"),i(16," Your current permissions: "),t(17,"code"),i(18),_(19,"json"),o()()),r&2&&(a(3),M("ngModel",s.currentRole),a(10),x(P(14,3,s.currentRole)),a(5),x(P(19,5,s.currentPermissions)))},dependencies:[y,D,I,N,G,j,F,C]});let n=e;return n})();var fe=["*"];function _e(n,e){if(n&1){let ge=w();t(0,"button",1),p("click",function(){u(ge);let r=Z();return g(r._onClosed())}),t(1,"span",2),i(2,"\xD7"),o()()}}var pe=(()=>{let e=class e{get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}constructor(m){this._changeDetectorRef=m,this.type="default",this.dismissible=!1,this.elevation=0,this.closed=new J}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}};e.\u0275fac=function(r){return new(r||e)(d(ie))},e.\u0275cmp=v({type:e,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(r,s){r&2&&(Q(s._hostClassList),q("mtx-alert-dismissible",s.dismissible))},inputs:{type:"type",dismissible:[$.HasDecoratorInputTransform,"dismissible","dismissible",ne],elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],standalone:!0,features:[K,b],ngContentSelectors:fe,decls:2,vars:1,consts:[["type","button","aria-label","Close",1,"mtx-alert-close"],["type","button","aria-label","Close",1,"mtx-alert-close",3,"click"],["aria-hidden","true"]],template:function(r,s){r&1&&(ee(),te(0),S(1,_e,3,0,"button",0)),r&2&&(a(),X(1,s.dismissible?1:-1))},styles:[`.mtx-alert{position:relative;display:block;padding:12px 20px;margin-bottom:16px;border:1px solid transparent;border-radius:var(--mtx-alert-container-shape);background-color:var(--mtx-alert-background-color);color:var(--mtx-alert-text-color)}.mtx-alert.mtx-alert-info{background-color:var(--mtx-alert-info-background-color);color:var(--mtx-alert-info-text-color)}.mtx-alert.mtx-alert-success{background-color:var(--mtx-alert-success-background-color);color:var(--mtx-alert-success-text-color)}.mtx-alert.mtx-alert-warning{background-color:var(--mtx-alert-warning-background-color);color:var(--mtx-alert-warning-text-color)}.mtx-alert.mtx-alert-danger{background-color:var(--mtx-alert-danger-background-color);color:var(--mtx-alert-danger-text-color)}.mtx-alert-close{position:absolute;top:0;bottom:0;right:0;padding:0 1.25rem;font-size:1.5rem;line-height:1;color:inherit;opacity:.5;background-color:transparent;border:0;cursor:pointer}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-close:hover{opacity:.75}.mtx-alert-dismissible{padding-right:4rem}
`],encapsulation:2,changeDetection:0});let n=e;return n})(),de=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=L({type:e}),e.\u0275inj=Y({imports:[oe]});let n=e;return n})();var R=()=>["admin"],ve=()=>["guest"],be=()=>["adminnnnn"],Se=()=>[];function Te(n,e){n&1&&(t(0,"p",11),i(1," I should see it only admin "),o())}function ye(n,e){n&1&&(t(0,"p",11),i(1," Usage on both only and except I should see it only admin "),o())}function Ee(n,e){n&1&&(t(0,"p",12),i(1,"I will see it only guest"),o())}function Ce(n,e){n&1&&(t(0,"p",13),i(1,"I will see it except adminnnnn"),o())}function Re(n,e){n&1&&(t(0,"p",14),i(1,"I should see it except admin"),o())}function we(n,e){n&1&&(t(0,"div"),i(1,` Testing template
`),o())}function Me(n,e){n&1&&(t(0,"div"),i(1,` Testing template
`),o())}function Ae(n,e){n&1&&(t(0,"p",15),i(1,"else block"),o())}function ke(n,e){n&1&&(t(0,"p",16),i(1,"then block"),o())}function Ie(n,e){n&1&&(t(0,"button"),i(1," This should be visible to admin or superadmin "),o())}function Ne(n,e){n&1&&(t(0,"button"),i(1,"WTF"),o())}var ue=(()=>{let e=class e{constructor(m){this.permissionsSrv=m,this.comparedPermission=["guest"]}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((m,r)=>{setTimeout(()=>m(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}};e.\u0275fac=function(r){return new(r||e)(d(E))},e.\u0275cmp=v({type:e,selectors:[["app-permissions-test"]],standalone:!0,features:[b],decls:39,vars:28,consts:[["a",""],["b",""],["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"permissionsAuthorized","permissionsUnauthorized","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(r,s){if(r&1){let c=w();T(0,"page-header"),t(1,"mtx-alert",2),i(2,"The permissions check will delay 2s."),o(),t(3,"p")(4,"button",3),p("click",function(){return u(c),g(s.addPermission())}),i(5,"Add Permission [ admin ]"),o(),t(6,"button",3),p("click",function(){return u(c),g(s.removePermission())}),i(7,"Remove Permission [ admin ]"),o()(),S(8,Te,2,0,"ng-template",4)(9,ye,2,0,"ng-template",5)(10,Ee,2,0,"ng-template",4)(11,Ce,2,0,"ng-template",6),p("permissionsAuthorized",function(){return u(c),g(s.authorized())})("permissionsUnauthorized",function(){return u(c),g(s.unAuthorized())}),S(12,Re,2,0,"ng-template",7)(13,we,2,0,"div",8)(14,Me,2,0,"div",9)(15,Ae,2,0,"ng-template",null,0,z)(17,ke,2,0,"ng-template",null,1,z),t(19,"p"),i(20," Compared permission: "),t(21,"code"),i(22),_(23,"json"),o()(),t(24,"div")(25,"button",3),p("click",function(){return u(c),g(s.changeToAdmin())}),i(26,"Change To Admin Permission"),o(),t(27,"button",3),p("click",function(){return u(c),g(s.changeToAnotherPermission())}),i(28,"Change To Awesome Permission"),o(),t(29,"button",3),p("click",function(){return u(c),g(s.changeToGuest())}),i(30,"Change To Guest Permission"),o()(),t(31,"div"),S(32,Ie,2,0,"button",10)(33,Ne,2,0,"button",10),o(),t(34,"p"),i(35," Your current permissions: "),t(36,"code"),i(37),_(38,"json"),o()()}if(r&2){let c=B(16),l=B(18);a(8),h("ngxPermissionsOnly",f(20,R)),a(),h("ngxPermissionsOnly",f(21,R))("ngxPermissionsExcept","hhhhh"),a(),h("ngxPermissionsOnly",f(22,ve)),a(),h("ngxPermissionsExcept",f(23,be)),a(),h("ngxPermissionsExcept",f(24,R)),a(),h("ngxPermissionsOnly",f(25,R))("ngxPermissionsOnlyElse",c)("ngxPermissionsOnlyThen",l),a(),h("ngxPermissionsExcept",f(26,R))("ngxPermissionsExceptElse",c)("ngxPermissionsExceptThen",l),a(8),x(P(23,16,s.comparedPermission)),a(10),h("ngxPermissionsOnly",s.comparedPermission),a(),h("ngxPermissionsOnly",f(27,Se)),a(4),x(P(38,18,s.getPermissions()))}},dependencies:[y,de,pe,me,re,C]});let n=e;return n})();var dt=[{path:"role-switching",component:le},{path:"route-guard",component:ce,canActivate:[U],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:ue,canActivate:[U],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];export{dt as routes};
