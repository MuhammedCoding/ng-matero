"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[697],{6697:(I,d,r)=>{r.r(d),r.d(d,{routes:()=>G});var l=r(621),u=r(6814),m=r(6223),a=r(9488),_=r(8645),h=r(9773),p=r(9633),e=r(5879);let T=(()=>{class t{constructor(s,n){this.rolesSrv=s,this.permissionsSrv=n,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new _.x}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe((0,h.R)(this._destroy$)).subscribe(s=>{console.log(s)}),this.permissionsSrv.permissions$.pipe((0,h.R)(this._destroy$)).subscribe(s=>{console.log(s)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(l.cM),e.Y36(l.YI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-permissions-role-switching"]],standalone:!0,features:[e.jDz],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,n){1&s&&(e._UZ(0,"page-header"),e.TgZ(1,"p"),e._uU(2," The permissions management is powered by "),e.TgZ(3,"a",0)(4,"code"),e._uU(5,"ngx-permissions"),e.qZA()(),e._uU(6,".\n"),e.qZA(),e.TgZ(7,"mat-button-toggle-group",1),e.NdJ("ngModelChange",function(c){return n.currentRole=c})("change",function(){return n.onPermissionChange()}),e.TgZ(8,"mat-button-toggle",2),e._uU(9,"ADMIN"),e.qZA(),e.TgZ(10,"mat-button-toggle",3),e._uU(11,"MANAGER"),e.qZA(),e.TgZ(12,"mat-button-toggle",4),e._uU(13,"GUEST"),e.qZA()(),e.TgZ(14,"p"),e._uU(15," Your current role: "),e.TgZ(16,"code"),e._uU(17),e.ALo(18,"json"),e.qZA()(),e.TgZ(19,"p"),e._uU(20," Your current permissions: "),e.TgZ(21,"code"),e._uU(22),e.ALo(23,"json"),e.qZA()()),2&s&&(e.xp6(7),e.Q6J("ngModel",n.currentRole),e.xp6(10),e.Oqu(e.lcZ(18,3,n.currentRole)),e.xp6(5),e.Oqu(e.lcZ(23,5,n.currentPermissions)))},dependencies:[u.Ts,m.u5,m.JJ,m.On,a.vV,a.A9,a.Yi,p.qA]}),t})();var x=r(2787);let P=(()=>{class t{constructor(s,n,i){this.rolesSrv=s,this.permissionsSrv=n,this.router=i,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(l.cM),e.Y36(l.YI),e.Y36(x.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-permissions-route-guard"]],standalone:!0,features:[e.jDz],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,n){1&s&&(e._UZ(0,"page-header"),e.TgZ(1,"p"),e._uU(2," The route will be redirected to dashboard after change permission.\n"),e.qZA(),e.TgZ(3,"mat-button-toggle-group",0),e.NdJ("ngModelChange",function(c){return n.currentRole=c})("change",function(){return n.onPermissionChange()}),e.TgZ(4,"mat-button-toggle",1),e._uU(5,"ADMIN"),e.qZA(),e.TgZ(6,"mat-button-toggle",2),e._uU(7,"MANAGER"),e.qZA(),e.TgZ(8,"mat-button-toggle",3),e._uU(9,"GUEST"),e.qZA()(),e.TgZ(10,"p"),e._uU(11," Your current role: "),e.TgZ(12,"code"),e._uU(13),e.ALo(14,"json"),e.qZA()(),e.TgZ(15,"p"),e._uU(16," Your current permissions: "),e.TgZ(17,"code"),e._uU(18),e.ALo(19,"json"),e.qZA()()),2&s&&(e.xp6(3),e.Q6J("ngModel",n.currentRole),e.xp6(10),e.Oqu(e.lcZ(14,3,n.currentRole)),e.xp6(5),e.Oqu(e.lcZ(19,5,n.currentPermissions)))},dependencies:[u.Ts,m.u5,m.JJ,m.On,a.vV,a.A9,a.Yi,p.qA]}),t})();var A=r(2495);function f(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i._onClosed())}),e.TgZ(1,"span",2),e._uU(2,"\xd7"),e.qZA()()}}const Z=["*"];let b=(()=>{class t{get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}get dismissible(){return this._dismissible}set dismissible(s){this._dismissible=(0,A.Ig)(s)}constructor(s){this._changeDetectorRef=s,this.type="default",this._dismissible=!1,this.elevation=0,this.closed=new e.vpe}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(s,n){2&s&&(e.Tol(n._hostClassList),e.ekj("mtx-alert-dismissible",n.dismissible))},inputs:{type:"type",dismissible:"dismissible",elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],ngContentSelectors:Z,decls:2,vars:1,consts:[[3,"ngIf"],["type","button","aria-label","Close",1,"mtx-alert-close",3,"click"],["aria-hidden","true"]],template:function(s,n){1&s&&(e.F$t(),e.Hsn(0),e.YNc(1,f,3,0,"ng-template",0)),2&s&&(e.xp6(1),e.Q6J("ngIf",n.dismissible))},dependencies:[u.O5],styles:[".mtx-alert{position:relative;display:block;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem;background-color:var(--mtx-alert-background-color);color:var(--mtx-alert-text-color)}.mtx-alert.mtx-alert-info{background-color:var(--mtx-alert-info-background-color);color:var(--mtx-alert-info-text-color)}.mtx-alert.mtx-alert-success{background-color:var(--mtx-alert-success-background-color);color:var(--mtx-alert-success-text-color)}.mtx-alert.mtx-alert-warning{background-color:var(--mtx-alert-warning-background-color);color:var(--mtx-alert-warning-text-color)}.mtx-alert.mtx-alert-danger{background-color:var(--mtx-alert-danger-background-color);color:var(--mtx-alert-danger-text-color)}.mtx-alert-close{position:absolute;top:0;bottom:0;right:0;padding:0 1.25rem;font-size:1.5rem;line-height:1;color:inherit;opacity:.5;background-color:transparent;border:0;cursor:pointer}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-close:hover{opacity:.75}.mtx-alert-dismissible{padding-right:4rem}\n"],encapsulation:2,changeDetection:0}),t})(),v=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez]}),t})();function y(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," I should see it only admin "),e.qZA())}function C(t,o){1&t&&(e.TgZ(0,"p",11),e._uU(1," Usage on both only and except I should see it only admin "),e.qZA())}function U(t,o){1&t&&(e.TgZ(0,"p",12),e._uU(1,"I will see it only guest"),e.qZA())}function M(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"I will see it except adminnnnn"),e.qZA())}function R(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"I should see it except admin"),e.qZA())}function O(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," Testing template\n"),e.qZA())}function E(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," Testing template\n"),e.qZA())}function N(t,o){1&t&&(e.TgZ(0,"p",15),e._uU(1,"else block"),e.qZA())}function S(t,o){1&t&&(e.TgZ(0,"p",16),e._uU(1,"then block"),e.qZA())}function k(t,o){1&t&&(e.TgZ(0,"button"),e._uU(1," This should be visible to admin or superadmin "),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"button"),e._uU(1,"WTF"),e.qZA())}const g=function(){return["admin"]},D=function(){return["guest"]},Y=function(){return["adminnnnn"]},J=function(){return[]},G=[{path:"role-switching",component:T},{path:"route-guard",component:P,canActivate:[l.oL],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class t{constructor(s){this.permissionsSrv=s,this.comparedPermission=["guest"]}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((s,n)=>{setTimeout(()=>s(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(l.YI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-permissions-test"]],standalone:!0,features:[e.jDz],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(s,n){if(1&s&&(e._UZ(0,"page-header"),e.TgZ(1,"mtx-alert",0),e._uU(2,"The permissions check will delay 2s."),e.qZA(),e.TgZ(3,"p")(4,"button",1),e.NdJ("click",function(){return n.addPermission()}),e._uU(5,"Add Permission [ admin ]"),e.qZA(),e.TgZ(6,"button",1),e.NdJ("click",function(){return n.removePermission()}),e._uU(7,"Remove Permission [ admin ]"),e.qZA()(),e.YNc(8,y,2,0,"ng-template",2),e.YNc(9,C,2,0,"ng-template",3),e.YNc(10,U,2,0,"ng-template",2),e.YNc(11,M,2,0,"ng-template",4),e.NdJ("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),e.YNc(12,R,2,0,"ng-template",5),e.YNc(13,O,2,0,"div",6),e.YNc(14,E,2,0,"div",7),e.YNc(15,N,2,0,"ng-template",null,8,e.W1O),e.YNc(17,S,2,0,"ng-template",null,9,e.W1O),e.TgZ(19,"p"),e._uU(20," Compared permission: "),e.TgZ(21,"code"),e._uU(22),e.ALo(23,"json"),e.qZA()(),e.TgZ(24,"div")(25,"button",1),e.NdJ("click",function(){return n.changeToAdmin()}),e._uU(26,"Change To Admin Permission"),e.qZA(),e.TgZ(27,"button",1),e.NdJ("click",function(){return n.changeToAnotherPermission()}),e._uU(28,"Change To Awesome Permission"),e.qZA(),e.TgZ(29,"button",1),e.NdJ("click",function(){return n.changeToGuest()}),e._uU(30,"Change To Guest Permission"),e.qZA()(),e.TgZ(31,"div"),e.YNc(32,k,2,0,"button",10),e.YNc(33,q,2,0,"button",10),e.qZA(),e.TgZ(34,"p"),e._uU(35," Your current permissions: "),e.TgZ(36,"code"),e._uU(37),e.ALo(38,"json"),e.qZA()()),2&s){const i=e.MAs(16),c=e.MAs(18);e.xp6(8),e.Q6J("ngxPermissionsOnly",e.DdM(20,g)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(21,g))("ngxPermissionsExcept","hhhhh"),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(22,D)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(23,Y)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(24,g)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(25,g))("ngxPermissionsOnlyElse",i)("ngxPermissionsOnlyThen",c),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(26,g))("ngxPermissionsExceptElse",i)("ngxPermissionsExceptThen",c),e.xp6(8),e.Oqu(e.lcZ(23,16,n.comparedPermission)),e.xp6(10),e.Q6J("ngxPermissionsOnly",n.comparedPermission),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(27,J)),e.xp6(4),e.Oqu(e.lcZ(38,18,n.getPermissions()))}},dependencies:[u.Ts,v,b,l.VI,l.gE,p.qA]}),t})(),canActivate:[l.oL],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}]}}]);