import{a as k,b as w,c as I}from"./chunk-3DSPS73M.js";import{$ as f,$a as q,Aa as d,Ac as ie,Ca as V,Cf as y,Da as Y,Db as h,Eb as x,Ga as J,Ia as P,Jb as O,Ka as l,Kb as ee,Ma as W,Ne as C,Oa as L,R as N,Ra as K,Te as M,V as B,Va as t,Vb as S,Wa as o,Xa as b,_ as z,_b as te,aa as U,cb as p,cf as R,ea as $,eb as Q,fa as H,fb as X,gb as Z,l as G,pb as D,qb as i,qf as T,rb as u,rf as A,sf as ne,tf as j,uf as oe,vb as _,wb as g,za as a}from"./chunk-HLZYCX4L.js";var re=(()=>{let e=class e{constructor(m,s){this.rolesSrv=m,this.permissionsSrv=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new G}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(N(this._destroy$)).subscribe(m=>{console.log(m)}),this.permissionsSrv.permissions$.pipe(N(this._destroy$)).subscribe(m=>{console.log(m)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}};e.\u0275fac=function(s){return new(s||e)(d(A),d(T))},e.\u0275cmp=f({type:e,selectors:[["app-permissions-role-switching"]],standalone:!0,features:[_],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(b(0,"page-header"),t(1,"p"),i(2," The permissions management is powered by "),t(3,"a",0)(4,"code"),i(5,"ngx-permissions"),o()(),i(6,`.
`),o(),t(7,"mat-button-toggle-group",1),p("ngModelChange",function(v){return r.currentRole=v})("change",function(){return r.onPermissionChange()}),t(8,"mat-button-toggle",2),i(9,"ADMIN"),o(),t(10,"mat-button-toggle",3),i(11,"MANAGER"),o(),t(12,"mat-button-toggle",4),i(13,"GUEST"),o()(),t(14,"p"),i(15," Your current role: "),t(16,"code"),i(17),h(18,"json"),o()(),t(19,"p"),i(20," Your current permissions: "),t(21,"code"),i(22),h(23,"json"),o()()),s&2&&(a(7),l("ngModel",r.currentRole),a(10),u(x(18,3,r.currentRole)),a(5),u(x(23,5,r.currentPermissions)))},dependencies:[S,R,C,M,I,k,w,y]});let n=e;return n})();var me=(()=>{let e=class e{constructor(m,s,r){this.rolesSrv=m,this.permissionsSrv=s,this.router=r,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}};e.\u0275fac=function(s){return new(s||e)(d(A),d(T),d(ie))},e.\u0275cmp=f({type:e,selectors:[["app-permissions-route-guard"]],standalone:!0,features:[_],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(b(0,"page-header"),t(1,"p"),i(2,` The route will be redirected to dashboard after change permission.
`),o(),t(3,"mat-button-toggle-group",0),p("ngModelChange",function(v){return r.currentRole=v})("change",function(){return r.onPermissionChange()}),t(4,"mat-button-toggle",1),i(5,"ADMIN"),o(),t(6,"mat-button-toggle",2),i(7,"MANAGER"),o(),t(8,"mat-button-toggle",3),i(9,"GUEST"),o()(),t(10,"p"),i(11," Your current role: "),t(12,"code"),i(13),h(14,"json"),o()(),t(15,"p"),i(16," Your current permissions: "),t(17,"code"),i(18),h(19,"json"),o()()),s&2&&(a(3),l("ngModel",r.currentRole),a(10),u(x(14,3,r.currentRole)),a(5),u(x(19,5,r.currentPermissions)))},dependencies:[S,R,C,M,I,k,w,y]});let n=e;return n})();function ge(n,e){if(n&1){let pe=q();t(0,"button",1),p("click",function(){$(pe);let s=Q();return H(s._onClosed())}),t(1,"span",2),i(2,"\xD7"),o()()}}var he=["*"],ae=(()=>{let e=class e{get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}constructor(m){this._changeDetectorRef=m,this.type="default",this.dismissible=!1,this.elevation=0,this.closed=new Y}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}};e.\u0275fac=function(s){return new(s||e)(d(V))},e.\u0275cmp=f({type:e,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(s,r){s&2&&(L(r._hostClassList),W("mtx-alert-dismissible",r.dismissible))},inputs:{type:"type",dismissible:[z.HasDecoratorInputTransform,"dismissible","dismissible",ee],elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],standalone:!0,features:[J,_],ngContentSelectors:he,decls:2,vars:1,consts:[["type","button","class","mtx-alert-close","aria-label","Close"],["type","button","aria-label","Close",1,"mtx-alert-close",3,"click"],["aria-hidden","true"]],template:function(s,r){s&1&&(X(),Z(0),P(1,ge,3,0,"button",0)),s&2&&(a(),K(1,r.dismissible?1:-1))},styles:[`.mtx-alert{position:relative;display:block;padding:12px 20px;margin-bottom:16px;border:1px solid transparent;border-radius:var(--mtx-alert-container-shape);background-color:var(--mtx-alert-background-color);color:var(--mtx-alert-text-color)}.mtx-alert.mtx-alert-info{background-color:var(--mtx-alert-info-background-color);color:var(--mtx-alert-info-text-color)}.mtx-alert.mtx-alert-success{background-color:var(--mtx-alert-success-background-color);color:var(--mtx-alert-success-text-color)}.mtx-alert.mtx-alert-warning{background-color:var(--mtx-alert-warning-background-color);color:var(--mtx-alert-warning-text-color)}.mtx-alert.mtx-alert-danger{background-color:var(--mtx-alert-danger-background-color);color:var(--mtx-alert-danger-text-color)}.mtx-alert-close{position:absolute;top:0;bottom:0;right:0;padding:0 1.25rem;font-size:1.5rem;line-height:1;color:inherit;opacity:.5;background-color:transparent;border:0;cursor:pointer}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-close:hover{opacity:.75}.mtx-alert-dismissible{padding-right:4rem}
`],encapsulation:2,changeDetection:0});let n=e;return n})(),le=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=U({type:e}),e.\u0275inj=B({imports:[te]});let n=e;return n})();function fe(n,e){n&1&&(t(0,"p",11),i(1," I should see it only admin "),o())}function _e(n,e){n&1&&(t(0,"p",11),i(1," Usage on both only and except I should see it only admin "),o())}function ve(n,e){n&1&&(t(0,"p",12),i(1,"I will see it only guest"),o())}function Pe(n,e){n&1&&(t(0,"p",13),i(1,"I will see it except adminnnnn"),o())}function be(n,e){n&1&&(t(0,"p",14),i(1,"I should see it except admin"),o())}function Se(n,e){n&1&&(t(0,"div"),i(1,` Testing template
`),o())}function Te(n,e){n&1&&(t(0,"div"),i(1,` Testing template
`),o())}function ye(n,e){n&1&&(t(0,"p",15),i(1,"else block"),o())}function Ee(n,e){n&1&&(t(0,"p",16),i(1,"then block"),o())}function Ce(n,e){n&1&&(t(0,"button"),i(1," This should be visible to admin or superadmin "),o())}function Me(n,e){n&1&&(t(0,"button"),i(1,"WTF"),o())}var E=()=>["admin"],Re=()=>["guest"],Ae=()=>["adminnnnn"],ke=()=>[],ce=(()=>{let e=class e{constructor(m){this.permissionsSrv=m,this.comparedPermission=["guest"]}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((m,s)=>{setTimeout(()=>m(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}};e.\u0275fac=function(s){return new(s||e)(d(T))},e.\u0275cmp=f({type:e,selectors:[["app-permissions-test"]],standalone:!0,features:[_],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(s,r){if(s&1&&(b(0,"page-header"),t(1,"mtx-alert",0),i(2,"The permissions check will delay 2s."),o(),t(3,"p")(4,"button",1),p("click",function(){return r.addPermission()}),i(5,"Add Permission [ admin ]"),o(),t(6,"button",1),p("click",function(){return r.removePermission()}),i(7,"Remove Permission [ admin ]"),o()(),P(8,fe,2,0,"ng-template",2)(9,_e,2,0,"ng-template",3)(10,ve,2,0,"ng-template",2)(11,Pe,2,0,"ng-template",4),p("permissionsAuthorized",function(){return r.authorized()})("permissionsUnauthorized",function(){return r.unAuthorized()}),P(12,be,2,0,"ng-template",5)(13,Se,2,0,"div",6)(14,Te,2,0,"div",7)(15,ye,2,0,"ng-template",null,8,O)(17,Ee,2,0,"ng-template",null,9,O),t(19,"p"),i(20," Compared permission: "),t(21,"code"),i(22),h(23,"json"),o()(),t(24,"div")(25,"button",1),p("click",function(){return r.changeToAdmin()}),i(26,"Change To Admin Permission"),o(),t(27,"button",1),p("click",function(){return r.changeToAnotherPermission()}),i(28,"Change To Awesome Permission"),o(),t(29,"button",1),p("click",function(){return r.changeToGuest()}),i(30,"Change To Guest Permission"),o()(),t(31,"div"),P(32,Ce,2,0,"button",10)(33,Me,2,0,"button",10),o(),t(34,"p"),i(35," Your current permissions: "),t(36,"code"),i(37),h(38,"json"),o()()),s&2){let c=D(16),v=D(18);a(8),l("ngxPermissionsOnly",g(20,E)),a(),l("ngxPermissionsOnly",g(21,E))("ngxPermissionsExcept","hhhhh"),a(),l("ngxPermissionsOnly",g(22,Re)),a(),l("ngxPermissionsExcept",g(23,Ae)),a(),l("ngxPermissionsExcept",g(24,E)),a(),l("ngxPermissionsOnly",g(25,E))("ngxPermissionsOnlyElse",c)("ngxPermissionsOnlyThen",v),a(),l("ngxPermissionsExcept",g(26,E))("ngxPermissionsExceptElse",c)("ngxPermissionsExceptThen",v),a(8),u(x(23,16,r.comparedPermission)),a(10),l("ngxPermissionsOnly",r.comparedPermission),a(),l("ngxPermissionsOnly",g(27,ke)),a(4),u(x(38,18,r.getPermissions()))}},dependencies:[S,le,ae,oe,ne,y]});let n=e;return n})();var lt=[{path:"role-switching",component:re},{path:"route-guard",component:me,canActivate:[j],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:ce,canActivate:[j],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];export{lt as routes};
