import{a as V,b as B,c as z}from"./chunk-A6U5SLWL.js";import{a as M,c as R,i as w}from"./chunk-IGYCCKWV.js";import{Bb as F,Hb as I,Sb as G,ec as y,fc as j,gc as le,hc as Y,ic as ce,qc as E,r as me}from"./chunk-QFG54YUX.js";import{Eb as X,Fc as _,Gc as P,Ha as d,Ia as u,Ib as S,Kb as g,Lc as H,Mb as Z,Ob as ee,Qa as q,Sb as te,Tc as re,Xb as t,Xc as se,Yb as o,Zb as T,bc as k,ec as p,gc as ie,ha as U,hc as ne,ic as oe,lb as a,mb as Q,na as J,o as L,od as C,pc as W,qc as i,rc as x,sa as h,uc as D,ud as ae,vc as O,wa as v,wc as N,xa as K,yc as b,zc as f}from"./chunk-J6GASL6I.js";var de=(()=>{let e=class e{constructor(){this.rolesSrv=h(j),this.permissionsSrv=h(y),this.currentRole="",this.currentPermissions=[],this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new L}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(U(this._destroy$)).subscribe(m=>{console.log(m)}),this.permissionsSrv.permissions$.pipe(U(this._destroy$)).subscribe(m=>{console.log(m)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=v({type:e,selectors:[["app-permissions-role-switching"]],standalone:!0,features:[b],decls:26,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(T(0,"page-header"),t(1,"p"),i(2," The permissions management is powered by "),t(3,"a",0)(4,"code"),i(5,"ngx-permissions"),o()(),i(6,`.
`),o(),t(7,"mat-card")(8,"mat-card-content")(9,"mat-button-toggle-group",1),N("ngModelChange",function(l){return O(r.currentRole,l)||(r.currentRole=l),l}),p("change",function(){return r.onPermissionChange()}),t(10,"mat-button-toggle",2),i(11,"ADMIN"),o(),t(12,"mat-button-toggle",3),i(13,"MANAGER"),o(),t(14,"mat-button-toggle",4),i(15,"GUEST"),o()(),t(16,"p"),i(17," Your current role: "),t(18,"code"),i(19),_(20,"json"),o()(),t(21,"p"),i(22," Your current permissions: "),t(23,"code"),i(24),_(25,"json"),o()()()()),s&2&&(a(9),D("ngModel",r.currentRole),a(10),x(P(20,3,r.currentRole)),a(5),x(P(25,5,r.currentPermissions)))},dependencies:[C,G,F,I,z,V,B,w,M,R,E]});let n=e;return n})();var ue=(()=>{let e=class e{constructor(){this.router=h(me),this.rolesSrv=h(j),this.permissionsSrv=h(y),this.currentRole="",this.currentPermissions=[],this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=v({type:e,selectors:[["app-permissions-route-guard"]],standalone:!0,features:[b],decls:22,vars:7,consts:[[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(T(0,"page-header"),t(1,"p"),i(2,` The route will be redirected to dashboard after change permission.
`),o(),t(3,"mat-card")(4,"mat-card-content")(5,"mat-button-toggle-group",0),N("ngModelChange",function(l){return O(r.currentRole,l)||(r.currentRole=l),l}),p("change",function(){return r.onPermissionChange()}),t(6,"mat-button-toggle",1),i(7,"ADMIN"),o(),t(8,"mat-button-toggle",2),i(9,"MANAGER"),o(),t(10,"mat-button-toggle",3),i(11,"GUEST"),o()(),t(12,"p"),i(13," Your current role: "),t(14,"code"),i(15),_(16,"json"),o()(),t(17,"p"),i(18," Your current permissions: "),t(19,"code"),i(20),_(21,"json"),o()()()()),s&2&&(a(5),D("ngModel",r.currentRole),a(10),x(P(16,3,r.currentRole)),a(5),x(P(21,5,r.currentPermissions)))},dependencies:[C,G,F,I,z,V,B,w,M,R,E]});let n=e;return n})();var ve=["*"];function be(n,e){if(n&1){let fe=k();t(0,"button",1),p("click",function(){d(fe);let s=ie();return u(s._onClosed())}),t(1,"span",2),i(2,"\xD7"),o()()}}var ge=(()=>{let e=class e{get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}constructor(m){this._changeDetectorRef=m,this.type="default",this.dismissible=!1,this.elevation=0,this.closed=new q}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}};e.\u0275fac=function(s){return new(s||e)(Q(re))},e.\u0275cmp=v({type:e,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(s,r){s&2&&(ee(r._hostClassList),Z("mtx-alert-dismissible",r.dismissible))},inputs:{type:"type",dismissible:[2,"dismissible","dismissible",se],elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],standalone:!0,features:[X,b],ngContentSelectors:ve,decls:2,vars:1,consts:[["type","button","aria-label","Close",1,"mtx-alert-close"],["type","button","aria-label","Close",1,"mtx-alert-close",3,"click"],["aria-hidden","true"]],template:function(s,r){s&1&&(ne(),oe(0),S(1,be,3,0,"button",0)),s&2&&(a(),te(r.dismissible?1:-1))},styles:[`.mtx-alert{position:relative;display:block;padding:12px 20px;margin-bottom:16px;border:1px solid var(--mtx-alert-outline-color);border-radius:var(--mtx-alert-container-shape);background-color:var(--mtx-alert-background-color);color:var(--mtx-alert-text-color)}.mtx-alert.mtx-alert-info{background-color:var(--mtx-alert-info-background-color);color:var(--mtx-alert-info-text-color)}.mtx-alert.mtx-alert-success{background-color:var(--mtx-alert-success-background-color);color:var(--mtx-alert-success-text-color)}.mtx-alert.mtx-alert-warning{background-color:var(--mtx-alert-warning-background-color);color:var(--mtx-alert-warning-text-color)}.mtx-alert.mtx-alert-danger{background-color:var(--mtx-alert-danger-background-color);color:var(--mtx-alert-danger-text-color)}.mtx-alert-close{position:absolute;top:0;bottom:0;right:0;padding:0 1.25rem;font-size:1.5rem;line-height:1;color:inherit;opacity:.5;background-color:transparent;border:0;cursor:pointer}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-close:hover{opacity:.75}.mtx-alert-dismissible{padding-right:4rem}
`],encapsulation:2,changeDetection:0});let n=e;return n})(),he=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=K({type:e}),e.\u0275inj=J({imports:[ae]});let n=e;return n})();var A=()=>["admin"],Te=()=>["guest"],Ce=()=>["adminnnnn"],ye=()=>[];function Ee(n,e){n&1&&(t(0,"p",11),i(1," I should see it only admin "),o())}function Me(n,e){n&1&&(t(0,"p",11),i(1," Usage on both only and except I should see it only admin "),o())}function Re(n,e){n&1&&(t(0,"p",12),i(1,"I will see it only guest"),o())}function we(n,e){n&1&&(t(0,"p",13),i(1,"I will see it except adminnnnn"),o())}function Ae(n,e){n&1&&(t(0,"p",14),i(1,"I should see it except admin"),o())}function ke(n,e){n&1&&(t(0,"div"),i(1," Testing template "),o())}function De(n,e){n&1&&(t(0,"div"),i(1," Testing template "),o())}function Oe(n,e){n&1&&(t(0,"p",15),i(1,"else block"),o())}function Ne(n,e){n&1&&(t(0,"p",16),i(1,"then block"),o())}function Fe(n,e){n&1&&(t(0,"button"),i(1," This should be visible to admin or superadmin "),o())}function Ie(n,e){n&1&&(t(0,"button"),i(1,"WTF"),o())}var xe=(()=>{let e=class e{constructor(){this.permissionsSrv=h(y),this.comparedPermission=["guest"]}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((m,s)=>{setTimeout(()=>m(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=v({type:e,selectors:[["app-permissions-test"]],standalone:!0,features:[b],decls:41,vars:28,consts:[["a",""],["b",""],["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"permissionsAuthorized","permissionsUnauthorized","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],[4,"ngxPermissionsOnly"],[1,"bg-green-50","text-white"],[1,"bg-purple-50","text-white"],[1,"bg-orange-50","text-white"],[1,"bg-azure-50","text-white"],[1,"bg-azure-30","text-light"],[1,"bg-azure-90","text-dark"]],template:function(s,r){if(s&1){let c=k();T(0,"page-header"),t(1,"mat-card")(2,"mat-card-content")(3,"mtx-alert",2),i(4,"\u26A0\uFE0F The permissions check will delay 2s."),o(),t(5,"p")(6,"button",3),p("click",function(){return d(c),u(r.addPermission())}),i(7,"Add Permission [ admin ]"),o(),t(8,"button",3),p("click",function(){return d(c),u(r.removePermission())}),i(9,"Remove Permission [ admin ]"),o()(),S(10,Ee,2,0,"ng-template",4)(11,Me,2,0,"ng-template",5)(12,Re,2,0,"ng-template",4)(13,we,2,0,"ng-template",6),p("permissionsAuthorized",function(){return d(c),u(r.authorized())})("permissionsUnauthorized",function(){return d(c),u(r.unAuthorized())}),S(14,Ae,2,0,"ng-template",7)(15,ke,2,0,"div",8)(16,De,2,0,"div",9)(17,Oe,2,0,"ng-template",null,0,H)(19,Ne,2,0,"ng-template",null,1,H),t(21,"p"),i(22," Compared permission: "),t(23,"code"),i(24),_(25,"json"),o()(),t(26,"div")(27,"button",3),p("click",function(){return d(c),u(r.changeToAdmin())}),i(28,"Change To Admin Permission"),o(),t(29,"button",3),p("click",function(){return d(c),u(r.changeToAnotherPermission())}),i(30,"Change To Awesome Permission"),o(),t(31,"button",3),p("click",function(){return d(c),u(r.changeToGuest())}),i(32,"Change To Guest Permission"),o()(),t(33,"div"),S(34,Fe,2,0,"button",10)(35,Ie,2,0,"button",10),o(),t(36,"p"),i(37," Your current permissions: "),t(38,"code"),i(39),_(40,"json"),o()()()()}if(s&2){let c=W(18),l=W(20);a(10),g("ngxPermissionsOnly",f(20,A)),a(),g("ngxPermissionsOnly",f(21,A))("ngxPermissionsExcept","hhhhh"),a(),g("ngxPermissionsOnly",f(22,Te)),a(),g("ngxPermissionsExcept",f(23,Ce)),a(),g("ngxPermissionsExcept",f(24,A)),a(),g("ngxPermissionsOnly",f(25,A))("ngxPermissionsOnlyElse",c)("ngxPermissionsOnlyThen",l),a(),g("ngxPermissionsExcept",f(26,A))("ngxPermissionsExceptElse",c)("ngxPermissionsExceptThen",l),a(8),x(P(25,16,r.comparedPermission)),a(10),g("ngxPermissionsOnly",r.comparedPermission),a(),g("ngxPermissionsOnly",f(27,ye)),a(4),x(P(40,18,r.getPermissions()))}},dependencies:[C,w,M,R,he,ge,ce,le,E]});let n=e;return n})();var Et=[{path:"role-switching",component:de},{path:"route-guard",component:ue,canActivate:[Y],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:xe,canActivate:[Y],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];export{Et as routes};
