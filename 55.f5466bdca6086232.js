(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[55],{1055:(qt,rt,V)=>{"use strict";V.r(rt),V.d(rt,{MediaModule:()=>At});var $t=V(989),yt=V(2787),Vt=V(4391),bt=V.n(Vt),s=V(5879),E=V(6814),S=V(3176),_t=V(3680),It=V(6970);function Y(M,B){if(1&M){const T=s.EpF();s.TgZ(0,"mat-grid-tile")(1,"mat-grid-tile-header")(2,"span",4),s._uU(3),s.qZA()(),s.TgZ(4,"img",5),s.NdJ("click",function(){const Ot=s.CHM(T).index,lt=s.oxw();return s.KtG(lt.preview(Ot))}),s.qZA()()}if(2&M){const T=B.$implicit,j=B.index;s.xp6(3),s.hij("Gallery Image: ",j+1,""),s.xp6(1),s.MGl("alt","Gallery Image ",j+1,""),s.Q6J("src",T.src,s.LSH)}}const ht=[{path:"gallery",component:(()=>{class M{constructor(){this.dir="assets/images/pixabay/",this.images=[];for(let T=1;T<=20;T++)this.images.push({title:T,src:this.dir+T+".jpg"})}preview(T){const j={index:T};new(bt())(this.images,j)}}return M.\u0275fac=function(T){return new(T||M)},M.\u0275cmp=s.Xpm({type:M,selectors:[["app-media-gallery"]],decls:8,vars:1,consts:[["title","Media",1,"bg-pink-A100"],["href","https://github.com/nzbin/photoviewer","target","_blank"],["cols","4","rowHeight","1:1"],[4,"ngFor","ngForOf"],["matLine",""],[1,"w-full","h-full","object-cover","cursor-pointer",3,"src","alt","click"]],template:function(T,j){1&T&&(s._UZ(0,"page-header",0),s.TgZ(1,"p"),s._uU(2," The media pictures are powered by "),s.TgZ(3,"a",1),s._uU(4,"PhotoViewer"),s.qZA(),s._uU(5,", you can click the picture to enlarge it.\n"),s.qZA(),s.TgZ(6,"mat-grid-list",2),s.YNc(7,Y,5,3,"mat-grid-tile",3),s.qZA()),2&T&&(s.xp6(7),s.Q6J("ngForOf",j.images))},dependencies:[E.sg,S.Il,S.DX,S.$H,_t.X2,S.jo,It.q]}),M})()}];let Pt=(()=>{class M{}return M.\u0275fac=function(T){return new(T||M)},M.\u0275mod=s.oAB({type:M}),M.\u0275inj=s.cJS({imports:[yt.Bz.forChild(ht),yt.Bz]}),M})(),At=(()=>{class M{}return M.\u0275fac=function(T){return new(T||M)},M.\u0275mod=s.oAB({type:M}),M.\u0275inj=s.cJS({imports:[$t.m,Pt]}),M})()},4391:function(qt){qt.exports=function(){"use strict";function V(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bt(n.key),n)}}function bt(t){var e=function Vt(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var s=function(t,e){return new s.fn.init(t,e)},E=window.document,S=[],_t=S.concat,It=S.filter,Y=S.slice,G={},ht={},Pt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Rt=/^\s*<(\w+|!)[^>]*>/,Xt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,B=["val","css","html","text","data","width","height","offset"],T=E.createElement("table"),j=E.createElement("tr"),zt={tr:E.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:j,th:j,"*":E.createElement("div")},Ot=/^[\w-]*$/,lt={},Di=lt.toString,Gt=E.createElement("div"),ut=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},xt=E.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1};function ft(t){return null==t?String(t):lt[Di.call(t)]||"object"}function Mt(t){return"string"==typeof t}function q(t){return"function"==ft(t)}function ct(t){return null!=t&&t==t.window}function Kt(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function dt(t){return"object"==ft(t)}function gt(t){return dt(t)&&!ct(t)&&Object.getPrototypeOf(t)==Object.prototype}function Jt(t){var e=!!t&&"length"in t&&t.length,i=ft(t);return"function"!=i&&!ct(t)&&("array"==i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function pt(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function Qt(t,e){return"number"!=typeof e||Pt[pt(t)]?e:e+"px"}function ti(t){return t.replace(/-+(.)?/g,function(e,i){return i?i.toUpperCase():""})}function ii(t){return t in ht?ht[t]:ht[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function Tt(t){return t instanceof s}function K(t,e,i,n){return q(e)?e.call(t,i,n):e}function Nt(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function J(t,e){var i=t.className||"",n=i&&void 0!==i.baseVal;if(void 0===e)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function qi(t,e){var i={width:["padding-left","padding-right","border-left-width","border-right-width"],height:["padding-top","padding-bottom","border-top-width","border-bottom-width"]};return"border-box"!==t.css("box-sizing")||function Yi(){return window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv:11\./)}()?parseFloat(t.css(e)):parseFloat(t.css(e))-parseFloat(t.css(i[e][0]))-parseFloat(t.css(i[e][1]))-parseFloat(t.css(i[e][2]))-parseFloat(t.css(i[e][3]))}function ei(t,e){var i=t.replace(/./,function(o){return o[0].toUpperCase()}),n=this[0];return void 0===e?ct(n)?n.document.documentElement["client"+i]:Kt(n)?n.documentElement["scroll"+i]:qi(this,t):this.each(function(o){(n=s(this)).css(t,K(this,e,o,n[t]()))})}s.fn=s.prototype={constuctor:s,length:0,forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,splice:S.splice,indexOf:S.indexOf,init:function(t,e){var i;if(!t)return this;if("string"==typeof t)if("<"==(t=t.trim())[0]&&Rt.test(t))i=s.fragment(t,RegExp.$1,e),t=null;else{if(void 0!==e)return s(e).find(t);i=s.qsa(E,t)}else{if(q(t))return s(E).ready(t);if(Tt(t))return t;if(ut(t))i=function Hi(t){return It.call(t,function(e){return null!=e})}(t);else if(dt(t))i=[t],t=null;else{if(void 0!==e)return s(e).find(t);i=s.qsa(E,t)}}return s.makeArray(i,t,this)},concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)i[t]=Tt(e=arguments[t])?e.toArray():e;return _t.apply(Tt(this)?this.toArray():this,i)},pluck:function(t){return s.map(this,function(e){return e[t]})},toArray:function(){return this.get()},get:function(t){return void 0===t?Y.call(this):this[t>=0?t:t+this.length]},size:function(){return this.length},each:function(t){return S.every.call(this,function(e,i){return!1!==t.call(e,i,e)}),this},map:function(t){return s(s.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return s(Y.apply(this,arguments))},first:function(){var t=this[0];return t&&!dt(t)?t:s(t)},last:function(){var t=this[this.length-1];return t&&!dt(t)?t:s(t)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)}},s.extend=s.fn.extend=function(){var t,e,i,n,o,a,r=arguments[0]||{},h=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[h]||{},h++),"object"!=typeof r&&!q(r)&&(r={}),h===l&&(r=this,h--);h<l;h++)if(null!=(t=arguments[h]))for(e in t)i=r[e],r!==(n=t[e])&&(u&&n&&(gt(n)||(o=ut(n)))?(o?(o=!1,a=i&&ut(i)?i:[]):a=i&&gt(i)?i:{},r[e]=s.extend(u,a,n)):void 0!==n&&(r[e]=n));return r},s.extend({makeArray:function(t,e,i){var n,o=t?t.length:0;for(n=0;n<o;n++)i[n]=t[n];return i.length=o,i.selector=e||"",i},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},qsa:function(t,e){var i,n="#"==e[0],o=!n&&"."==e[0],a=n||o?e.slice(1):e,r=Ot.test(a);return t.getElementById&&r&&n?(i=t.getElementById(a))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:Y.call(r&&!n&&t.getElementsByClassName?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},fragment:function(t,e,i){var n,o,a;return Xt.test(t)&&(n=s(E.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(At,"<$1></$2>")),void 0===e&&(e=Rt.test(t)&&RegExp.$1),e in zt||(e="*"),(a=zt[e]).innerHTML=""+t,n=s.each(Y.call(a.childNodes),function(){a.removeChild(this)})),gt(i)&&(o=s(n),s.each(i,function(r,h){B.indexOf(r)>-1?o[r](h):o.attr(r,h)})),n},matches:function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,o=t.parentNode,a=!o;return a&&(o=Gt).appendChild(t),n=~s.qsa(o,e).indexOf(t),a&&Gt.removeChild(t),n},each:function(t,e){var i,n;if(Jt(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},map:function(t,e){var i,o,a,n=[];if(Jt(t))for(o=0;o<t.length;o++)null!=(i=e(t[o],o))&&n.push(i);else for(a in t)null!=(i=e(t[a],a))&&n.push(i);return function $i(t){return t.length>0?s.fn.concat.apply([],t):t}(n)}}),s.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()}),s.fn.init.prototype=s.fn;var Ki=1,vt={},ni="onfocusin"in window,oi={focus:"focusin",blur:"focusout"},ai={mouseenter:"mouseover",mouseleave:"mouseout"},Ji=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,si=function(){return!0},kt=function(){return!1},Qi={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function mt(t){return t._zid||(t._zid=Ki++)}function ri(t,e){if(e||!t.isDefaultPrevented){e||(e=t),s.each(Qi,function(i,n){var o=e[i];t[i]=function(){return this[n]=si,o&&o.apply(e,arguments)},t[n]=kt});try{t.timeStamp||(t.timeStamp=Date.now())}catch(i){console.warn(i)}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(t.isDefaultPrevented=si)}return t}function hi(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function ie(t,e,i,n){if((e=hi(e)).ns)var o=function te(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(e.ns);return(vt[mt(t)]||[]).filter(function(a){return a&&(!e.e||a.e==e.e)&&(!e.ns||o.test(a.ns))&&(!i||mt(a.fn)===mt(i))&&(!n||a.sel==n)})}function li(t,e){return t.del&&!ni&&t.e in oi||!!e}function ui(t){return ai[t]||ni&&oi[t]||t}function Bt(t,e,i,n,o){var a=mt(t);(e||"").split(/\s/).forEach(function(r){ie(t,r,i,n).forEach(function(h){delete vt[a][h.i],"removeEventListener"in t&&t.removeEventListener(ui(h.e),h.proxy,li(h,o))})})}function fi(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)fi(t.childNodes[i],e)}function oe(t,e,i,n){var o,r,a=s.map(e,function(l){var u=[];return"array"==(o=ft(l))?(l.forEach(function(f){return void 0!==f.nodeType?u.push(f):Tt(f)?u=u.concat(f.get()):void(u=u.concat(s.fragment(f)))}),u):"object"==o||null==l?l:s.fragment(l)}),h=t.length>1;return a.length<1?t:t.each(function(l,u){var f=xt(E.documentElement,r=n?u:u.parentNode);a.forEach(function(d){if(h)d=d.cloneNode(!0);else if(!r)return s(d).remove();i.call(u,d),f&&fi(d,function(c){if(!(null==c.nodeName||"SCRIPT"!==c.nodeName.toUpperCase()||c.type&&"text/javascript"!==c.type||c.src)){var w=c.ownerDocument?c.ownerDocument.defaultView:window;w.eval.call(w,c.innerHTML)}})})})}var Ct,F="",Et=E.createElement("div"),ge=Et.style.transitionProperty;function ci(t){return Ct?Ct+t:t.toLowerCase()}void 0===Et.style.transform&&s.each({Webkit:"webkit",Moz:"",O:"o"},function(t,e){if(void 0!==Et.style[t+"TransitionProperty"])return F="-"+t.toLowerCase()+"-",Ct=e,!1}),Et=null,s.fx={off:void 0===Ct&&void 0===ge,speeds:{_default:400,fast:200,slow:600},cssPrefix:F,transitionEnd:ci("TransitionEnd"),animationEnd:ci("AnimationEnd")};var Ft,di,gi,pi,vi,mi,wi,yi,bi,pe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,U={};function ve(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function zi(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function Si(t){var e,i;return G[t]||(e=E.createElement(t),E.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),G[t]=i),G[t]}(this.nodeName))})}function xi(){return this.css("display","none")}function Zt(t,e,i,n,o){"function"==typeof e&&!o&&(o=e,e=void 0);var a={opacity:i};return n&&(a.scale=n,t.css(s.fx.cssPrefix+"transform-origin","0 0")),t.animate(a,e,null,o)}Ft=F+"transform",U[di=F+"transition-property"]=U[gi=F+"transition-duration"]=U[vi=F+"transition-delay"]=U[pi=F+"transition-timing-function"]=U[mi=F+"animation-name"]=U[wi=F+"animation-duration"]=U[bi=F+"animation-delay"]=U[yi=F+"animation-timing-function"]="";var p=s,Ce={find:function Wi(t){var i=this;return t?"object"==typeof t?s(t).filter(function(){var n=this;return S.some.call(i,function(o){return xt(o,n)})}):1==this.length?s(s.qsa(this[0],t)):this.map(function(){return s.qsa(this,t)}):s()},closest:function Ui(t,e){var i=[],n="object"==typeof t&&s(t);return this.each(function(o,a){for(;a&&!(n?n.indexOf(a)>=0:s.matches(a,t));)a=a!==e&&!Kt(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)}),s(i)},css:function Ii(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t)return i?i.style[ti(t)]||getComputedStyle(i,"").getPropertyValue(t):void 0;if(ut(t)){if(!i)return;var n={},o=getComputedStyle(i,"");return s.each(t,function(h,l){n[l]=i.style[ti(l)]||o.getPropertyValue(l)}),n}}var a="";if("string"==ft(t))e||0===e?a=pt(t)+":"+Qt(t,e):this.each(function(){this.style.removeProperty(pt(t))});else for(var r in t)t[r]||0===t[r]?a+=pt(r)+":"+Qt(r,t[r])+";":this.each(function(){this.style.removeProperty(pt(r))});return this.each(function(){this.style.cssText+=";"+a})},addClass:function Ri(t){var e=[];return t?this.each(function(i){if("className"in this){e=[];var n=J(this);K(this,t,i,n).split(/\s+/g).forEach(function(a){s(this).hasClass(a)||e.push(a)},this),e.length&&J(this,n+(n?" ":"")+e.join(" "))}}):this},hasClass:function Pi(t){return!!t&&S.some.call(this,function(e){return this.test(J(e))},ii(t))},removeClass:function Ai(t){var e=[];return this.each(function(i){if("className"in this){if(void 0===t)return J(this,"");e=J(this),K(this,t,i,e).split(/\s+/g).forEach(function(n){e=e.replace(ii(n)," ")}),J(this,e.trim())}})},attr:function Zi(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(dt(t))for(var o in t)Nt(this,o,t[o]);else Nt(this,t,K(this,e,n,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:void 0},removeAttr:function ji(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(e){Nt(this,e)},this)})},append:function ue(){return oe(this,arguments,function(t){this.insertBefore(t,null)},!0)},remove:function re(){return this.each(function(){1===this.nodeType&&function se(t){for(var e,i,n=0;void 0!==(i=t[n]);n++)i._zid&&(e=vt[i._zid])&&e.forEach(o=>{const a=o.e+"."+o.ns.split(" ").join(".");Bt(i,a,o.fn,o.sel)})}(function ae(t,e){var i;return i=typeof t.getElementsByTagName<"u"?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll<"u"?t.querySelectorAll(e||"*"):[],void 0===e||e&&function Vi(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}(t,e)?s.merge([t],i):i}(this)),null!=this.parentNode&&this.parentNode.removeChild(this)})},empty:function he(){return this.each(function(){this.innerHTML=""})},html:function le(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;s(this).empty().append(K(this,t,e,i))}):0 in this?this[0].innerHTML:null},width:function Xi(t){return ei.call(this,"width",t)},height:function Gi(t){return ei.call(this,"height",t)},scrollTop:function ki(t){if(this.length){var e="scrollTop"in this[0];return void 0===t?e?this[0].scrollTop:ct(this[0])?this[0].pageYOffset:this[0].defaultView.pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function Bi(t){if(this.length){var e="scrollLeft"in this[0];return void 0===t?e?this[0].scrollLeft:ct(this[0])?this[0].pageXOffset:this[0].defaultView.pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},offset:function Oi(t){if(t)return this.each(function(i){var n=s(this),o=K(this,t,i,n.offset()),a=n.offsetParent().offset(),r={top:o.top-a.top,left:o.left-a.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;if(E.documentElement!==this[0]&&!xt(E.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},offsetParent:function Fi(){return this.map(function(){for(var t=this.offsetParent||E.body;t&&!M.test(t.nodeName)&&"static"==s(t).css("position");)t=t.offsetParent;return t})},position:function Ni(){if(this.length){var e,t=this[0],i=this.offsetParent(),n=M.test(i[0].nodeName)?{top:0,left:0}:i.offset();return"fixed"===s(t).css("position")?e=t.getBoundingClientRect():(e=this.offset(),n.top+=parseFloat(s(i[0]).css("border-top-width"))||0,n.left+=parseFloat(s(i[0]).css("border-left-width"))||0),{top:e.top-n.top-parseFloat(s(t).css("margin-top"))||0,left:e.left-n.left-parseFloat(s(t).css("margin-left"))||0}}},on:function fe(t,e,i,n,o){var a,r,h=this;return t&&!Mt(t)?(s.each(t,function(l,u){h.on(l,e,i,u,o)}),h):(!Mt(e)&&!q(n)&&!1!==n&&(n=i,i=e,e=void 0),(void 0===n||!1===i)&&(n=i,i=void 0),!1===n&&(n=kt),h.each(function(l,u){o&&(a=function(f){return Bt(u,f.type,n),n.apply(this,arguments)}),e&&(r=function(f){var d,c=s(f.target).closest(e,u).get(0);if(c&&c!==u)return d=s.extend(function ne(t){var e,i={originalEvent:t};for(e in t)!Ji.test(e)&&void 0!==t[e]&&(i[e]=t[e]);return ri(i,t)}(f),{currentTarget:c,liveFired:u}),(a||n).apply(c,[d].concat(Y.call(arguments,1)))}),function ee(t,e,i,n,o,a,r){var h=mt(t),l=vt[h]||(vt[h]=[]);e.split(/\s/).forEach(function(u){if("ready"==u)return s(E).ready(i);var f=hi(u);f.fn=i,f.sel=o,f.e in ai&&(i=function(c){var w=c.relatedTarget;if(!w||w!==this&&!xt(this,w))return f.fn.apply(this,arguments)}),f.del=a;var d=a||i;f.proxy=function(c){if(!(c=ri(c)).isImmediatePropagationStopped()){c.data=n;var w=d.apply(t,null==c._args?[c]:[c].concat(c._args));return!1===w&&(c.preventDefault(),c.stopPropagation()),w}},f.i=l.length,l.push(f),"addEventListener"in t&&t.addEventListener(ui(f.e),f.proxy,li(f,r))})}(u,t,n,i,e,r||a)}))},off:function ce(t,e,i){var n=this;return t&&!Mt(t)?(s.each(t,function(o,a){n.off(o,e,a)}),n):(!Mt(e)&&!q(i)&&!1!==i&&(i=e,e=void 0),!1===i&&(i=kt),n.each(function(){Bt(this,t,i,e)}))},show:function be(t,e){return zi.call(this),void 0===t?t=0:this.css("opacity",0),Zt(this,t,1,"1,1",e)},hide:function ze(t,e){return void 0===t?xi.call(this):function ye(t,e,i,n){return Zt(t,e,0,i,function(){xi.call(s(this)),n&&n.call(this)})}(this,t,"0,0",e)},anim:function me(t,e,i,n,o){var a,h,f,r={},l="",u=this,d=s.fx.transitionEnd,c=!1;if(void 0===e&&(e=s.fx.speeds._default/1e3),void 0===o&&(o=0),s.fx.off&&(e=0),"string"==typeof t)r[mi]=t,r[wi]=e+"s",r[bi]=o+"s",r[yi]=i||"linear",d=s.fx.animationEnd;else{for(a in h=[],t)pe.test(a)?l+=a+"("+t[a]+") ":(r[a]=t[a],h.push(ve(a)));l&&(r[Ft]=l,h.push(Ft)),e>0&&"object"==typeof t&&(r[di]=h.join(", "),r[gi]=e+"s",r[vi]=o+"s",r[pi]=i||"linear")}return f=function(w){if(typeof w<"u"){if(w.target!==w.currentTarget)return;s(w.target).off(d,f)}else s(this).off(d,f);c=!0,s(this).css(U),n&&n.call(this)},e>0&&(this.on(d,f),setTimeout(function(){c||f.call(u)},1e3*(e+o)+25)),this.size()&&this.get(0),this.css(r),e<=0&&setTimeout(function(){u.each(function(){f.call(this)})},0),this},animate:function we(t,e,i,n,o){return q(e)&&(n=e,i=void 0,e=void 0),q(i)&&(n=i,i=void 0),gt(e)&&(i=e.easing,n=e.complete,o=e.delay,e=e.duration),e&&(e=("number"==typeof e?e:s.fx.speeds[e]||s.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(t,e,i,n,o)},fadeTo:function xe(t,e,i){return Zt(this,t,e,null,i)},fadeIn:function Me(t,e){var i=this.css("opacity");return i>0?this.css("opacity",0):i=1,zi.call(this).fadeTo(t,i,e)}};p.extend({isPlainObject:gt,isArray:ut,noop:function _i(){}}),p.fn.extend(Ce);var Ee={draggable:!0,resizable:!0,movable:!0,keyboard:!0,title:!0,modalWidth:320,modalHeight:320,fixedModalSize:!1,initMaximized:!1,gapThreshold:.02,ratioThreshold:.1,minRatio:.05,maxRatio:16,headerToolbar:["maximize","close"],footerToolbar:["zoomIn","zoomOut","prev","fullscreen","next","actualSize","rotateRight"],icons:{minimize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M20,14H4V10H20"></path>\n      </svg>',maximize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M4,4H20V20H4V4M6,8V18H18V8H6Z"></path>\n      </svg>',close:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12\n        L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z"></path>\n      </svg>',zoomIn:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43\n        C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5\n        C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5\n        C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z"></path>\n      </svg>',zoomOut:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5\n        A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16\n        C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14\n        C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z"></path>\n      </svg>',prev:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z"></path>\n      </svg>',next:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16,18H18V6H16M6,18L14.5,12L6,6V18Z"></path>\n      </svg>',fullscreen:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M8.5,12.5L11,15.5L14.5,11L19,17H5M23,18V6A2,2 0 0,0 21,4H3\n        A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18Z"></path>\n      </svg>',actualSize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M9.5,13.09L10.91,14.5L6.41,19H10V21H3V14H5V17.59L9.5,13.09\n        M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19\n        H17.59L13.09,14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\n        L13.09,9.5Z"></path>\n      </svg>',rotateLeft:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12\n        C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07\n        M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32\n        M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13\n        M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z"></path>\n      </svg>',rotateRight:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91\n        C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31\n        L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11\n        L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12\n        C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10\n        L15.55,5.55Z"></path>\n      </svg>'},i18n:{minimize:"Minimize",maximize:"Maximize (Alt+X)",close:"Close (Q)",zoomIn:"Zoom-in (+)",zoomOut:"Zoom-out (-)",prev:"Prev (\u2190)",next:"Next (\u2192)",fullscreen:"Fullscreen (F)",actualSize:"Actual-size (Ctrl+Alt+0)",rotateLeft:"Rotate-left (Ctrl+,)",rotateRight:"Rotate-right (Ctrl+.)"},multiInstances:!0,initAnimation:!0,animationDuration:400,fixedModalPos:!1,zIndex:1090,dragHandle:null,callbacks:{beforeOpen:p.noop,opened:p.noop,beforeClose:p.noop,closed:p.noop,beforeChange:p.noop,changed:p.noop},index:0,progressiveLoading:!0,appendTo:"body",customButtons:{},positionFixed:!0,initModalPos:null},Mi=window.document;function jt(t,e,i,n){var o=n?t.h:t.w,a=n?t.w:t.h;(a>e.h||o>e.w)&&i.addClass("is-grab"),a<=e.h&&o<=e.w&&i.removeClass("is-grab")}function Wt(){return!!("ontouchstart"in window||window.DocumentTouch&&Mi instanceof window.DocumentTouch)}function Lt(t){return/^(?:body|html)$/i.test(t.nodeName)}function Dt(t,e){return e.reduce(function(i,n){return i+parseFloat(t.css(n))},0)}function wt(t){return"border-box"===t.css("box-sizing")}var Ht=p(window),W=p(Mi),Z="click",Ut=Wt()?"touchstart":"mousedown",Q=Wt()?"touchmove":"mousemove",tt=Wt()?"touchend":"mouseup",v="photoviewer",H="."+v,z="."+v,O={isMoving:!1,isResizing:!1,zIndex:0},_e={draggable:function(e,i,n){var o=this,a=!1,r=0,h=0,l=0,u=0,d=function(y){(y=y||window.event).preventDefault(),!a||O.isMoving||O.isResizing||o.isMaximized||e.css({left:("touchmove"===y.type?y.targetTouches[0].pageX:y.clientX)-r+l,top:("touchmove"===y.type?y.targetTouches[0].pageY:y.clientY)-h+u})},c=function w(){W.off(Q+z,d).off(tt+z,w),a=!1,e[0].focus()};p(i).on(Ut+z,function(y){if(y=y||window.event,e[0].blur(),p(y.target).closest(n).length)return!0;o.options.multiInstances&&e.css("z-index",++O.zIndex),a=!0,r="touchstart"===y.type?y.targetTouches[0].pageX:y.clientX,h="touchstart"===y.type?y.targetTouches[0].pageY:y.clientY,l=parseFloat(e.css("left")),u=parseFloat(e.css("top")),e.css({left:l,top:u,right:"",bottom:""}),W.on(Q+z,d).on(tt+z,c)})}},Ci="html, body, .".concat(v,"-modal, .").concat(v,"-stage, .").concat(v,"-button, .").concat(v,"-resizable-handle"),Ie={movable:function(e,i){var n=this,o=!1,a=0,r=0,h=0,l=0,u=0,f=0,d=0,w=function(b){if((b=b||window.event).preventDefault(),o){var m=("touchmove"===b.type?b.targetTouches[0].pageX:b.clientX)-a,_=("touchmove"===b.type?b.targetTouches[0].pageY:b.clientY)-r,k=m+h,g=_+l;f>0?_+l>d?g=d:_+l<-f+d&&(g=-f+d):g=l,u>0?m+h>-d?k=-d:m+h<-u-d&&(k=-u-d):k=h,i.css({left:k,top:g}),p.extend(n.imageData,{left:k,top:g})}},y=function I(){W.off(Q+z,w).off(tt+z,I),o=!1,O.isMoving=!1,p(Ci).removeClass("is-grabbing")};e.on(Ut+z,function(b){(b=b||window.event).preventDefault();var P=i.width(),N=i.height(),m=e.width(),_=e.height();a="touchstart"===b.type?b.targetTouches[0].pageX:b.clientX,r="touchstart"===b.type?b.targetTouches[0].pageY:b.clientY,d=n.isRotated?(P-N)/2:0,f=n.isRotated?P-_:N-_,o=(u=n.isRotated?N-m:P-m)>0||f>0,O.isMoving=u>0||f>0,h=i.position().left-d,l=i.position().top+d,e.hasClass("is-grab")&&p(Ci).addClass("is-grabbing"),W.on(Q+z,w).on(tt+z,y)})}},Ei="html, body, .".concat(v,"-modal, .").concat(v,"-stage, .").concat(v,"-button"),Pe={resizable:function(e,i,n,o,a){var r=this,h=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-e"></div>')),l=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-w"></div>')),u=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-s"></div>')),f=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-n"></div>')),d=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-se"></div>')),c=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-sw"></div>')),w=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-ne"></div>')),y=p('<div class="'.concat(v,"-resizable-handle ").concat(v,'-resizable-handle-nw"></div>')),I={e:h,s:u,se:d,n:f,w:l,nw:y,ne:w,sw:c};e.append(h,l,u,f,d,c,w,y);var b=!1,P=0,N=0,m={w:0,h:0,x:0,y:0},_={w:0,h:0,x:0,y:0},k={w:0,h:0,x:0,y:0},g=0,it=0,et=0,Yt="",Li=function(C){if((C=C||window.event).preventDefault(),b&&!r.isMaximized){var L=("touchmove"===C.type?C.targetTouches[0].pageX:C.clientX)-P,D=("touchmove"===C.type?C.targetTouches[0].pageY:C.clientY)-N,$=function(C,x,R){var L=-x+m.w>o?x+m.x:m.x+m.w-o,D=-R+m.h>a?R+m.y:m.y+m.h-a;return{e:{width:Math.max(x+m.w,o)},s:{height:Math.max(R+m.h,a)},se:{width:Math.max(x+m.w,o),height:Math.max(R+m.h,a)},w:{width:Math.max(-x+m.w,o),left:L},n:{height:Math.max(-R+m.h,a),top:D},nw:{width:Math.max(-x+m.w,o),height:Math.max(-R+m.h,a),top:D,left:L},ne:{width:Math.max(x+m.w,o),height:Math.max(-R+m.h,a),top:D},sw:{width:Math.max(-x+m.w,o),height:Math.max(R+m.h,a),left:L}}[C]}(Yt,L,D);e.css($);var A=function(C,x,R){var L=x+m.w>o?_.w-it+x-g:o-(m.w-_.w)-it-g,D=R+m.h>a?_.h-et+R+g:a-(m.h-_.h)-et+g,$=-x+m.w>o?_.w-it-x-g:o-(m.w-_.w)-it-g,A=-R+m.h>a?_.h-et-R+g:a-(m.h-_.h)-et+g,nt=(L>0||n.position().left<0?n.position().left:0)-g,ot=(D>0||n.position().top<0?n.position().top:0)+g,at=($>0||n.position().left<0?n.position().left:0)-g,st=(A>0||n.position().top<0?n.position().top:0)+g;return{e:{left:L>=-g?(L-g)/2:nt>L?nt:L},s:{top:D>=g?(D+g)/2:ot>D?ot:D},se:{top:D>=g?(D+g)/2:ot>D?ot:D,left:L>=-g?(L-g)/2:nt>L?nt:L},w:{left:$>=-g?($-g)/2:at>$?at:$},n:{top:A>=g?(A+g)/2:st>A?st:A},nw:{top:A>=g?(A+g)/2:st>A?st:A,left:$>=-g?($-g)/2:at>$?at:$},ne:{top:A>=g?(A+g)/2:st>A?st:A,left:L>=-g?(L-g)/2:nt>L?nt:L},sw:{top:D>=g?(D+g)/2:ot>D?ot:D,left:$>=-g?($-g)/2:at>$?at:$}}[C]}(Yt,L,D);n.css(A),r.isDoResize=!0}},Ne=function X(){W.off(Q+z,Li).off(tt+z,X),O.isResizing&&jt({w:it,h:et},{w:i.width(),h:i.height()},i),b=!1,O.isResizing=!1,p(Ei).css("cursor","");var C=r.getImageScale(i.width(),i.height());p.extend(r.imageData,{initWidth:r.img.width*C,initHeight:r.img.height*C,initLeft:(i.width()-r.img.width*C)/2,initTop:(i.height()-r.img.height*C)/2})};p.each(I,function(X,C){C.on(Ut+z,function(x){!function(C,x){(x=x||window.event).preventDefault(),b=!0,O.isResizing=!0,P="touchstart"===x.type?x.targetTouches[0].pageX:x.clientX,N="touchstart"===x.type?x.targetTouches[0].pageY:x.clientY,m={w:e.width()+(wt(e)?r._modalEdgeValue.horizontal:0),h:e.height()+(wt(e)?r._modalEdgeValue.vertical:0),x:e.position().left,y:e.position().top},_={w:i.width(),h:i.height(),x:i.position().left,y:i.position().top},k={w:n.width(),h:n.height(),x:n.position().left,y:n.position().top},g=r.isRotated?(k.w-k.h)/2:0,it=r.isRotated?k.h:k.w,et=r.isRotated?k.w:k.h,Yt=C,p(Ei).css("cursor",C+"-resize"),W.on(Q+z,Li).on(tt+z,Ne)}(X,x)})})}},St=function(){function t(e,i,n){(function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=p.extend(!0,{},Ee,i),i&&p.isArray(i.footerToolbar)&&(this.options.footerToolbar=i.footerToolbar),i&&p.isArray(i.headerToolbar)&&(this.options.headerToolbar=i.headerToolbar),this.$el=p(n),this.isOpened=!1,this.isMaximized=!1,this.isRotated=!1,this.rotationDegree=0,this.isDoResize=!1,this.imageData={},this.modalData={width:null,height:null,left:null,top:null},this._lastTimestamp=0,this.init(e,this.options)}return function $t(t,e,i){return e&&V(t.prototype,e),i&&V(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"init",value:function(i,n){this.groupData=i,this.groupIndex=n.index,O.zIndex=0===O.zIndex?n.zIndex:O.zIndex;var o=i[this.groupIndex].src;this.open(),this.loadImage(o),n.draggable&&this.draggable(this.$photoviewer,this.dragHandle,H+"-button"),n.movable&&this.movable(this.$stage,this.$image),n.resizable&&this.resizable(this.$photoviewer,this.$stage,this.$image,n.modalWidth,n.modalHeight)}},{key:"_createBtns",value:function(i){var n=this,o=["minimize","maximize","close","zoomIn","zoomOut","prev","next","fullscreen","actualSize","rotateLeft","rotateRight"],a="";return p.each(i,function(r,h){var l="".concat(v,"-button ").concat(v,"-button-").concat(h);o.indexOf(h)>=0?a+='<button class="'.concat(l,'" title="').concat(n.options.i18n[h],'">\n          ').concat(n.options.icons[h],"\n          </button>"):n.options.customButtons[h]&&(a+='<button class="'.concat(l,'" title="').concat(n.options.customButtons[h].title||"",'">\n          ').concat(n.options.customButtons[h].text,"\n          </button>"))}),a}},{key:"_createTitle",value:function(){return this.options.title?'<div class="'.concat(v,'-title"></div>'):""}},{key:"_createTemplate",value:function(){return'<div class="'.concat(v,'-modal" tabindex="0">\n        <div class="').concat(v,'-inner">\n          <div class="').concat(v,'-header">\n            <div class="').concat(v,"-toolbar ").concat(v,'-toolbar-header">\n            ').concat(this._createBtns(this.options.headerToolbar),"\n            </div>\n            ").concat(this._createTitle(),'\n          </div>\n          <div class="').concat(v,'-stage">\n            <img class="').concat(v,'-image" src="" alt="" />\n          </div>\n          <div class="').concat(v,'-footer">\n            <div class="').concat(v,"-toolbar ").concat(v,'-toolbar-footer">\n            ').concat(this._createBtns(this.options.footerToolbar),"\n            </div>\n          </div>\n        </div>\n      </div>")}},{key:"build",value:function(){var i=this._createTemplate(),n=p(i);this.$photoviewer=n,this.$stage=n.find(H+"-stage"),this.$title=n.find(H+"-title"),this.$image=n.find(H+"-image"),this.$close=n.find(H+"-button-close"),this.$maximize=n.find(H+"-button-maximize"),this.$minimize=n.find(H+"-button-minimize"),this.$zoomIn=n.find(H+"-button-zoomIn"),this.$zoomOut=n.find(H+"-button-zoomOut"),this.$actualSize=n.find(H+"-button-actualSize"),this.$fullscreen=n.find(H+"-button-fullscreen"),this.$rotateLeft=n.find(H+"-button-rotateLeft"),this.$rotateRight=n.find(H+"-button-rotateRight"),this.$prev=n.find(H+"-button-prev"),this.$next=n.find(H+"-button-next"),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.$photoviewer.css("z-index",O.zIndex),this.options.positionFixed&&this.$photoviewer.css({position:"fixed"}),this.dragHandle=this.options.dragHandle&&this.options.dragHandle!==H+"-modal"?this.$photoviewer.find(this.options.dragHandle):this.$photoviewer,p(this.options.appendTo).eq(0).append(this.$photoviewer),this._stageEdgeValue={horizontal:Dt(this.$stage,["left","right","border-left-width","border-right-width"]),vertical:Dt(this.$stage,["top","bottom","border-top-width","border-bottom-width"])},this._modalEdgeValue={horizontal:Dt(this.$photoviewer,["padding-left","padding-right","border-left-width","border-right-width"]),vertical:Dt(this.$photoviewer,["padding-top","padding-bottom","border-top-width","border-bottom-width"])},this._addEvents(),this._addCustomButtonEvents()}},{key:"open",value:function(){this._triggerHook("beforeOpen",this),!this.options.multiInstances&&t.instances.length>0&&t.instances[0].close(),this.build(),this.setInitModalPos(),t.instances.push(this),this._triggerHook("opened",this)}},{key:"close",value:function(){var i=this;this._triggerHook("beforeClose",this),this.$photoviewer.remove(),0===(t.instances=t.instances.filter(function(n){return n!==i})).length&&(O.zIndex=this.options.zIndex,Ht.off("resize"+z)),this._triggerHook("closed",this)}},{key:"_getOffsetParentData",value:function(){var i=p(this.options.appendTo)[0];return{width:this.options.positionFixed||Lt(i)?Ht.width():i.clientWidth,height:this.options.positionFixed||Lt(i)?Ht.height():i.clientHeight,scrollLeft:this.options.positionFixed?0:Lt(i)?W.scrollLeft():i.scrollLeft,scrollTop:this.options.positionFixed?0:Lt(i)?W.scrollTop():i.scrollTop}}},{key:"setModalToCenter",value:function(){var i,n,o,a,r=0,h=0;if(wt(this.$photoviewer)||(r+=this._modalEdgeValue.horizontal,h+=this._modalEdgeValue.vertical),p.isPlainObject(this.options.initModalPos))i=this.options.initModalPos.left,n=this.options.initModalPos.top,o=this.options.initModalPos.right,a=this.options.initModalPos.bottom;else{var l=this._getOffsetParentData();i=(l.width-this.options.modalWidth-r)/2+l.scrollLeft,n=(l.height-this.options.modalHeight-h)/2+l.scrollTop}this.$photoviewer.css({width:this.modalData.width||this.options.modalWidth,height:this.modalData.height||this.options.modalHeight,left:this.modalData.left||i,top:this.modalData.top||n,right:this.modalData.right||o,bottom:this.modalData.bottom||a})}},{key:"setInitModalPos",value:function(){this.options.initMaximized?(this.maximize(),this.isOpened=!0):this.setModalToCenter(),this.$photoviewer[0].focus()}},{key:"setModalSize",value:function(i){var n=this,o=this._getOffsetParentData(),a=i.width+this._stageEdgeValue.horizontal,r=i.height+this._stageEdgeValue.vertical,h=0,l=0;wt(this.$photoviewer)?(a+=this._modalEdgeValue.horizontal,r+=this._modalEdgeValue.vertical):(h+=this._modalEdgeValue.horizontal,l+=this._modalEdgeValue.vertical);var w,y,I,b,u=(this.options.gapThreshold>0?this.options.gapThreshold:0)+1,f=Math.min(o.width/((a+h)*u),o.height/((r+l)*u),1),d=Math.max(a*f,this.options.modalWidth),c=Math.max(r*f,this.options.modalHeight);if(d=this.options.fixedModalSize?this.options.modalWidth:Math.round(d),c=this.options.fixedModalSize?this.options.modalHeight:Math.round(c),p.isPlainObject(this.options.initModalPos))w=this.options.initModalPos.left,y=this.options.initModalPos.top,I=this.options.initModalPos.right,b=this.options.initModalPos.bottom;else{var P=this._getOffsetParentData();w=(P.width-d-h)/2+P.scrollLeft,y=(P.height-c-l)/2+P.scrollTop}var N={width:d,height:c,left:w,top:y,right:I,bottom:b};this.options.initAnimation?this.$photoviewer.animate(N,this.options.animationDuration,"ease-in-out",function(){n.setImageSize(i)}):(this.$photoviewer.css(N),this.setImageSize(i)),this.isOpened=!0}},{key:"getImageScale",value:function(i,n){return this.isRotated?Math.min(i/this.img.height,n/this.img.width,1):Math.min(i/this.img.width,n/this.img.height,1)}},{key:"setImageSize",value:function(i){var n={w:this.$stage.width(),h:this.$stage.height()},o=this.getImageScale(n.w,n.h);this.$image.css({width:Math.round(i.width*o),height:Math.round(i.height*o),left:(n.w-Math.round(i.width*o))/2,top:(n.h-Math.round(i.height*o))/2}),p.extend(this.imageData,{initWidth:i.width*o,initHeight:i.height*o,initLeft:(n.w-i.width*o)/2,initTop:(n.h-i.height*o)/2,width:i.width*o,height:i.height*o,left:(n.w-i.width*o)/2,top:(n.h-i.height*o)/2}),jt({w:this.$image.width(),h:this.$image.height()},{w:this.$stage.width(),h:this.$stage.height()},this.$stage,this.isRotated),this.imageLoaded||(this.$photoviewer.find(H+"-loader").remove(),this.$stage.removeClass("stage-ready"),this.$image.removeClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0)}},{key:"loadImage",value:function(i,n,o){var a=this;this.$image.removeAttr("style").attr("src",""),this.isRotated=!1,this.rotationDegree=0,this.imageLoaded=!1,this.$photoviewer.append('<div class="'.concat(v,'-loader"></div>')),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),this.$image.attr("src",i),function De(t,e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){i(n)},n.src=t}(i,function(r){a.img=r,a.imageData={originalWidth:r.width,originalHeight:r.height},a.isMaximized||a.isOpened&&a.options.fixedModalPos?a.setImageSize(r):a.setModalSize(r),n&&n.call()},function(){a.$photoviewer.find(H+"-loader").remove(),o&&o.call()}),this.options.title&&this.setImageTitle(i)}},{key:"setImageTitle",value:function(i){var n=this.groupData[this.groupIndex].title||function Se(t){return t.replace(/^.*?\/*([^/?]*)\.[a-z]+(\?.+|$)/gi,"$1")}(i);this.$title.html(n)}},{key:"jump",value:function(i){this._triggerHook("beforeChange",[this,this.groupIndex]);var n=Date.now();n-this._lastTimestamp>=this.options.animationDuration&&(this.groupIndex=this.groupIndex+i,this.jumpTo(this.groupIndex),this._lastTimestamp=n)}},{key:"jumpTo",value:function(i){var n=this;(i%=this.groupData.length)>=0?i%=this.groupData.length:i<0&&(i=(this.groupData.length+i)%this.groupData.length),this.groupIndex=i,this.loadImage(this.groupData[i].src,function(){n._triggerHook("changed",[n,i])},function(){n._triggerHook("changed",[n,i])})}},{key:"wheel",value:function(i){i.preventDefault();var n=1;i.deltaY?n=i.deltaY>0?1:-1:i.wheelDelta?n=-i.wheelDelta/120:i.detail&&(n=i.detail>0?1:-1);var o=-n*this.options.ratioThreshold,a={x:i.clientX-this.$stage.offset().left+W.scrollLeft(),y:i.clientY-this.$stage.offset().top+W.scrollTop()};this.zoom(o,a)}},{key:"zoom",value:function(i,n){i=i<0?1/(1-i):1+i,!((i=this.$image.width()/this.imageData.originalWidth*i)>this.options.maxRatio||i<this.options.minRatio)&&this.zoomTo(i,n)}},{key:"zoomTo",value:function(i,n){var o=this.$image,a=this.$stage,r_w=this.imageData.width,r_h=this.imageData.height,r_x=this.imageData.left,r_y=this.imageData.top,h={w:a.width(),h:a.height(),x:a.offset().left,y:a.offset().top};void 0===n&&(n={x:a.width()/2,y:a.height()/2});var l=this.imageData.originalWidth*i,u=this.imageData.originalHeight*i,f=n.x-(n.x-r_x)/r_w*l,d=n.y-(n.y-r_y)/r_h*u,c=this.isRotated?(l-u)/2:0,w=this.isRotated?u:l,y=this.isRotated?l:u,I=h.w-l,b=h.h-u;d=y<=h.h?(h.h-u)/2:d>c?c:d>b-c?d:b-c,f=w<=h.w?(h.w-l)/2:f>-c?-c:f>I+c?f:I+c,Math.abs(this.imageData.initWidth-l)<.05*this.imageData.initWidth?this.setImageSize(this.img):(o.css({width:Math.round(l),height:Math.round(u),left:Math.round(f),top:Math.round(d)}),jt({w:Math.round(w),h:Math.round(y)},{w:h.w,h:h.h},this.$stage)),p.extend(this.imageData,{width:l,height:u,left:f,top:d})}},{key:"rotate",value:function(i){this.rotationDegree=this.rotationDegree+i,this.isRotated=this.rotationDegree/90%2!=0,this.rotateTo(this.rotationDegree)}},{key:"rotateTo",value:function(i){this.$image.css({transform:"rotate("+i+"deg)"}),this.setImageSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}),this.$stage.removeClass("is-grab")}},{key:"resize",value:function(){this.isOpened&&(this.isMaximized?this.setImageSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}):this.setModalSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}))}},{key:"maximize",value:function(){this.$photoviewer.addClass(v+"-maximized"),this.$photoviewer.css({width:"auto",height:"auto",top:0,right:0,bottom:0,left:0}),this.isMaximized=!0}},{key:"exitMaximize",value:function(){this.$photoviewer.removeClass(v+"-maximized"),this.setModalToCenter(),this.isMaximized=!1}},{key:"toggleMaximize",value:function(){if(this.isMaximized)this.exitMaximize();else{var i=this.$photoviewer.width(),n=this.$photoviewer.height();wt(this.$photoviewer)&&(i+=this._modalEdgeValue.horizontal,n+=this._modalEdgeValue.vertical),this.modalData={width:i,height:n,left:parseFloat(this.$photoviewer.css("left")),top:parseFloat(this.$photoviewer.css("top"))},this.maximize()}this.setImageSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}),this.$photoviewer[0].focus()}},{key:"fullscreen",value:function(){(function He(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()})(this.$photoviewer[0]),this.$photoviewer[0].focus()}},{key:"_keydown",value:function(i){if(!this.options.keyboard)return!1;i.preventDefault();var o=i.ctrlKey||i.metaKey,a=i.altKey;switch(i.keyCode||i.which||i.charCode){case 37:this.jump(-1);break;case 39:this.jump(1);break;case 187:case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},i);break;case 189:case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},i);break;case 48:o&&a&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},i);break;case 188:o&&this.rotate(-90);break;case 190:o&&this.rotate(90);break;case 81:this.close();break;case 88:a&&this.toggleMaximize();break;case 70:this.fullscreen()}}},{key:"_addEvents",value:function(){var i=this;this.$close.on(Z+z,function(){i.close()}),this.$stage.on("wheel mousewheel DOMMouseScroll"+z,function(n){i.wheel(n)}),this.$zoomIn.on(Z+z,function(){i.zoom(3*i.options.ratioThreshold)}),this.$zoomOut.on(Z+z,function(){i.zoom(3*-i.options.ratioThreshold)}),this.$actualSize.on(Z+z,function(){i.zoomTo(1)}),this.$prev.on(Z+z,function(){i.jump(-1)}),this.$fullscreen.on(Z+z,function(){i.fullscreen()}),this.$next.on(Z+z,function(){i.jump(1)}),this.$rotateLeft.on(Z+z,function(){i.rotate(-90)}),this.$rotateRight.on(Z+z,function(){i.rotate(90)}),this.$maximize.on(Z+z,function(){i.toggleMaximize()}),this.$photoviewer.on("keydown"+z,function(n){i._keydown(n)}),Ht.on("resize"+z,function Le(t,e){var i=null;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}}(function(){return i.resize()},500))}},{key:"_addCustomButtonEvents",value:function(){var i=this,n=function(r){i.$photoviewer.find(H+"-button-"+r).on(Z+z,function(h){i.options.customButtons[r].click.apply(i,[i,h])})};for(var o in this.options.customButtons)n(o)}},{key:"_triggerHook",value:function(i,n){this.options.callbacks[i]&&this.options.callbacks[i].apply(this,p.isArray(n)?n:[n])}}]),t}();return function yt(t,e,i){return(e=bt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(St,"instances",[]),p.extend(St.prototype,_e,Ie,Pe),window.PhotoViewer=St,St}()}}]);