(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[55],{1055:(Ut,ot,P)=>{"use strict";P.r(ot),P.d(ot,{MediaModule:()=>Dt});var _t=P(989),F=P(2787),Ht=P(4391),mt=P.n(Ht),o=P(5879),_=P(6814),V=P(3176),Lt=P(3680),St=P(6970);function U(b,k){if(1&b){const x=o.EpF();o.TgZ(0,"mat-grid-tile")(1,"mat-grid-tile-header")(2,"span",4),o._uU(3),o.qZA()(),o.TgZ(4,"img",5),o.NdJ("click",function(){const Pt=o.CHM(x).index,st=o.oxw();return o.KtG(st.preview(Pt))}),o.qZA()()}if(2&b){const x=k.$implicit,Z=k.index;o.xp6(3),o.hij("Gallery Image: ",Z+1,""),o.xp6(1),o.MGl("alt","Gallery Image ",Z+1,""),o.Q6J("src",x.src,o.LSH)}}const at=[{path:"gallery",component:(()=>{class b{constructor(){this.dir="assets/images/pixabay/",this.images=[];for(let x=1;x<=20;x++)this.images.push({title:x,src:this.dir+x+".jpg"})}preview(x){const Z={index:x};new(mt())(this.images,Z)}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275cmp=o.Xpm({type:b,selectors:[["app-media-gallery"]],decls:8,vars:1,consts:[["title","Media",1,"bg-pink-A100"],["href","https://github.com/nzbin/photoviewer","target","_blank"],["cols","4","rowHeight","1:1"],[4,"ngFor","ngForOf"],["matLine",""],[1,"w-full","h-full","object-cover","cursor-pointer",3,"src","alt","click"]],template:function(x,Z){1&x&&(o._UZ(0,"page-header",0),o.TgZ(1,"p"),o._uU(2," The media pictures are powered by "),o.TgZ(3,"a",1),o._uU(4,"PhotoViewer"),o.qZA(),o._uU(5,", you can click the picture to enlarge it.\n"),o.qZA(),o.TgZ(6,"mat-grid-list",2),o.YNc(7,U,5,3,"mat-grid-tile",3),o.qZA()),2&x&&(o.xp6(7),o.Q6J("ngForOf",Z.images))},dependencies:[_.sg,V.Il,V.DX,V.$H,Lt.X2,V.jo,St.q]}),b})()}];let $t=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=o.oAB({type:b}),b.\u0275inj=o.cJS({imports:[F.Bz.forChild(at),F.Bz]}),b})(),Dt=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=o.oAB({type:b}),b.\u0275inj=o.cJS({imports:[_t.m,$t]}),b})()},4391:function(Ut){Ut.exports=function(){"use strict";function P(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function F(t,i,e){return(i=mt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function mt(t){var i=function Ht(t,i){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,i||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}var o=function(t,i){return new o.fn.init(t,i)},_=window.document,V=[],Lt=V.concat,St=V.filter,U=V.slice,J={},at={},$t={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Vt=/^\s*<(\w+|!)[^>]*>/,qt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,b=/^(?:body|html)$/i,k=["val","css","html","text","data","width","height","offset"],x=_.createElement("table"),Z=_.createElement("tr"),vt={tr:_.createElement("tbody"),tbody:x,thead:x,tfoot:x,td:Z,th:Z,"*":_.createElement("div")},Pt=/^[\w-]*$/,st={},Li=st.toString,Gt=_.createElement("div"),rt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},wt=_.documentElement.contains?function(t,i){return t!==i&&t.contains(i)}:function(t,i){for(;i&&(i=i.parentNode);)if(i===t)return!0;return!1};function ht(t){return null==t?String(t):st[Li.call(t)]||"object"}function yt(t){return"string"==typeof t}function q(t){return"function"==ht(t)}function lt(t){return null!=t&&t==t.window}function Kt(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function ft(t){return"object"==ht(t)}function ut(t){return ft(t)&&!lt(t)&&Object.getPrototypeOf(t)==Object.prototype}function Jt(t){var i=!!t&&"length"in t&&t.length,e=ht(t);return"function"!=e&&!lt(t)&&("array"==e||0===i||"number"==typeof i&&i>0&&i-1 in t)}function ct(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function Qt(t,i){return"number"!=typeof i||$t[ct(t)]?i:i+"px"}function ti(t){return t.replace(/-+(.)?/g,function(i,e){return e?e.toUpperCase():""})}function ii(t){return t in at?at[t]:at[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function Mt(t){return t instanceof o}function Q(t,i,e,n){return q(i)?i.call(t,e,n):i}function It(t,i,e){null==e?t.removeAttribute(i):t.setAttribute(i,e)}function tt(t,i){var e=t.className||"",n=e&&void 0!==e.baseVal;if(void 0===i)return n?e.baseVal:e;n?e.baseVal=i:t.className=i}function qi(t,i){var e={width:["padding-left","padding-right","border-left-width","border-right-width"],height:["padding-top","padding-bottom","border-top-width","border-bottom-width"]};return"border-box"!==t.css("box-sizing")||function Ui(){return window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv:11\./)}()?parseFloat(t.css(i)):parseFloat(t.css(i))-parseFloat(t.css(e[i][0]))-parseFloat(t.css(e[i][1]))-parseFloat(t.css(e[i][2]))-parseFloat(t.css(e[i][3]))}function ei(t,i){var e=t.replace(/./,function(a){return a[0].toUpperCase()}),n=this[0];return void 0===i?lt(n)?n.document.documentElement["client"+e]:Kt(n)?n.documentElement["scroll"+e]:qi(this,t):this.each(function(a){(n=o(this)).css(t,Q(this,i,a,n[t]()))})}o.fn=o.prototype={constuctor:o,length:0,forEach:V.forEach,reduce:V.reduce,push:V.push,sort:V.sort,splice:V.splice,indexOf:V.indexOf,init:function(t,i){var e;if(!t)return this;if("string"==typeof t)if("<"==(t=t.trim())[0]&&Vt.test(t))e=o.fragment(t,RegExp.$1,i),t=null;else{if(void 0!==i)return o(i).find(t);e=o.qsa(_,t)}else{if(q(t))return o(_).ready(t);if(Mt(t))return t;if(rt(t))e=function Si(t){return St.call(t,function(i){return null!=i})}(t);else if(ft(t))e=[t],t=null;else{if(void 0!==i)return o(i).find(t);e=o.qsa(_,t)}}return o.makeArray(e,t,this)},concat:function(){var t,i,e=[];for(t=0;t<arguments.length;t++)e[t]=Mt(i=arguments[t])?i.toArray():i;return Lt.apply(Mt(this)?this.toArray():this,e)},pluck:function(t){return o.map(this,function(i){return i[t]})},toArray:function(){return this.get()},get:function(t){return void 0===t?U.call(this):this[t>=0?t:t+this.length]},size:function(){return this.length},each:function(t){return V.every.call(this,function(i,e){return!1!==t.call(i,e,i)}),this},map:function(t){return o(o.map(this,function(i,e){return t.call(i,e,i)}))},slice:function(){return o(U.apply(this,arguments))},first:function(){var t=this[0];return t&&!ft(t)?t:o(t)},last:function(){var t=this[this.length-1];return t&&!ft(t)?t:o(t)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)}},o.extend=o.fn.extend=function(){var t,i,e,n,a,s,r=arguments[0]||{},h=1,u=arguments.length,f=!1;for("boolean"==typeof r&&(f=r,r=arguments[h]||{},h++),"object"!=typeof r&&!q(r)&&(r={}),h===u&&(r=this,h--);h<u;h++)if(null!=(t=arguments[h]))for(i in t)e=r[i],r!==(n=t[i])&&(f&&n&&(ut(n)||(a=rt(n)))?(a?(a=!1,s=e&&rt(e)?e:[]):s=e&&ut(e)?e:{},r[i]=o.extend(f,s,n)):void 0!==n&&(r[i]=n));return r},o.extend({makeArray:function(t,i,e){var n,a=t?t.length:0;for(n=0;n<a;n++)e[n]=t[n];return e.length=a,e.selector=i||"",e},merge:function(t,i){for(var e=+i.length,n=0,a=t.length;n<e;n++)t[a++]=i[n];return t.length=a,t},qsa:function(t,i){var e,n="#"==i[0],a=!n&&"."==i[0],s=n||a?i.slice(1):i,r=Pt.test(s);return t.getElementById&&r&&n?(e=t.getElementById(s))?[e]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:U.call(r&&!n&&t.getElementsByClassName?a?t.getElementsByClassName(s):t.getElementsByTagName(i):t.querySelectorAll(i))},fragment:function(t,i,e){var n,a,s;return qt.test(t)&&(n=o(_.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(Dt,"<$1></$2>")),void 0===i&&(i=Vt.test(t)&&RegExp.$1),i in vt||(i="*"),(s=vt[i]).innerHTML=""+t,n=o.each(U.call(s.childNodes),function(){s.removeChild(this)})),ut(e)&&(a=o(n),o.each(e,function(r,h){k.indexOf(r)>-1?a[r](h):a.attr(r,h)})),n},matches:function(t,i){if(!i||!t||1!==t.nodeType)return!1;var e=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(e)return e.call(t,i);var n,a=t.parentNode,s=!a;return s&&(a=Gt).appendChild(t),n=~o.qsa(a,i).indexOf(t),s&&Gt.removeChild(t),n},each:function(t,i){var e,n;if(Jt(t)){for(e=0;e<t.length;e++)if(!1===i.call(t[e],e,t[e]))return t}else for(n in t)if(!1===i.call(t[n],n,t[n]))return t;return t},map:function(t,i){var e,a,s,n=[];if(Jt(t))for(a=0;a<t.length;a++)null!=(e=i(t[a],a))&&n.push(e);else for(s in t)null!=(e=i(t[s],s))&&n.push(e);return function Vi(t){return t.length>0?o.fn.concat.apply([],t):t}(n)}}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,i){st["[object "+i+"]"]=i.toLowerCase()}),o.fn.init.prototype=o.fn;var Ji=1,dt={},ni="onfocusin"in window,oi={focus:"focusin",blur:"focusout"},ai={mouseenter:"mouseover",mouseleave:"mouseout"},Qi=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,si=function(){return!0},Rt=function(){return!1},te={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function gt(t){return t._zid||(t._zid=Ji++)}function ri(t,i){if(i||!t.isDefaultPrevented){i||(i=t),o.each(te,function(e,n){var a=i[e];t[e]=function(){return this[n]=si,a&&a.apply(i,arguments)},t[n]=Rt});try{t.timeStamp||(t.timeStamp=Date.now())}catch(e){console.warn(e)}(void 0!==i.defaultPrevented?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=si)}return t}function hi(t){var i=(""+t).split(".");return{e:i[0],ns:i.slice(1).sort().join(" ")}}function ee(t,i,e,n){if((i=hi(i)).ns)var a=function ie(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(i.ns);return(dt[gt(t)]||[]).filter(function(s){return s&&(!i.e||s.e==i.e)&&(!i.ns||a.test(s.ns))&&(!e||gt(s.fn)===gt(e))&&(!n||s.sel==n)})}function li(t,i){return t.del&&!ni&&t.e in oi||!!i}function fi(t){return ai[t]||ni&&oi[t]||t}function At(t,i,e,n,a){var s=gt(t);(i||"").split(/\s/).forEach(function(r){ee(t,r,e,n).forEach(function(h){delete dt[s][h.i],"removeEventListener"in t&&t.removeEventListener(fi(h.e),h.proxy,li(h,a))})})}function ui(t,i){i(t);for(var e=0,n=t.childNodes.length;e<n;e++)ui(t.childNodes[e],i)}function ae(t,i,e,n){var a,r,s=o.map(i,function(u){var f=[];return"array"==(a=ht(u))?(u.forEach(function(g){return void 0!==g.nodeType?f.push(g):Mt(g)?f=f.concat(g.get()):void(f=f.concat(o.fragment(g)))}),f):"object"==a||null==u?u:o.fragment(u)}),h=t.length>1;return s.length<1?t:t.each(function(u,f){var g=wt(_.documentElement,r=n?f:f.parentNode);s.forEach(function(v){if(h)v=v.cloneNode(!0);else if(!r)return o(v).remove();e.call(f,v),g&&ui(v,function(l){if(!(null==l.nodeName||"SCRIPT"!==l.nodeName.toUpperCase()||l.type&&"text/javascript"!==l.type||l.src)){var w=l.ownerDocument?l.ownerDocument.defaultView:window;w.eval.call(w,l.innerHTML)}})})})}var bt,B="",xt=_.createElement("div"),pe=xt.style.transitionProperty;function ci(t){return bt?bt+t:t.toLowerCase()}void 0===xt.style.transform&&o.each({Webkit:"webkit",Moz:"",O:"o"},function(t,i){if(void 0!==xt.style[t+"TransitionProperty"])return B="-"+t.toLowerCase()+"-",bt=i,!1}),xt=null,o.fx={off:void 0===bt&&void 0===pe,speeds:{_default:400,fast:200,slow:600},cssPrefix:B,transitionEnd:ci("TransitionEnd"),animationEnd:ci("AnimationEnd")};var Ot,di,gi,pi,mi,vi,wi,yi,Mi,me=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,Y={};function ve(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function bi(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function $i(t){var i,e;return J[t]||(i=_.createElement(t),_.body.appendChild(i),e=getComputedStyle(i,"").getPropertyValue("display"),i.parentNode.removeChild(i),"none"==e&&(e="block"),J[t]=e),J[t]}(this.nodeName))})}function xi(){return this.css("display","none")}function Nt(t,i,e,n,a){"function"==typeof i&&!a&&(a=i,i=void 0);var s={opacity:e};return n&&(s.scale=n,t.css(o.fx.cssPrefix+"transform-origin","0 0")),t.animate(s,i,null,a)}Ot=B+"transform",Y[di=B+"transition-property"]=Y[gi=B+"transition-duration"]=Y[mi=B+"transition-delay"]=Y[pi=B+"transition-timing-function"]=Y[vi=B+"animation-name"]=Y[wi=B+"animation-duration"]=Y[Mi=B+"animation-delay"]=Y[yi=B+"animation-timing-function"]="";var Ee={find:function Yi(t){var e=this;return t?"object"==typeof t?o(t).filter(function(){var n=this;return V.some.call(e,function(a){return wt(a,n)})}):1==this.length?o(o.qsa(this[0],t)):this.map(function(){return o.qsa(this,t)}):o()},closest:function Xi(t,i){var e=[],n="object"==typeof t&&o(t);return this.each(function(a,s){for(;s&&!(n?n.indexOf(s)>=0:o.matches(s,t));)s=s!==i&&!Kt(s)&&s.parentNode;s&&e.indexOf(s)<0&&e.push(s)}),o(e)},css:function Ii(t,i){if(arguments.length<2){var e=this[0];if("string"==typeof t)return e?e.style[ti(t)]||getComputedStyle(e,"").getPropertyValue(t):void 0;if(rt(t)){if(!e)return;var n={},a=getComputedStyle(e,"");return o.each(t,function(h,u){n[u]=e.style[ti(u)]||a.getPropertyValue(u)}),n}}var s="";if("string"==ht(t))i||0===i?s=ct(t)+":"+Qt(t,i):this.each(function(){this.style.removeProperty(ct(t))});else for(var r in t)t[r]||0===t[r]?s+=ct(r)+":"+Qt(r,t[r])+";":this.each(function(){this.style.removeProperty(ct(r))});return this.each(function(){this.style.cssText+=";"+s})},addClass:function Ai(t){var i=[];return t?this.each(function(e){if("className"in this){i=[];var n=tt(this);Q(this,t,e,n).split(/\s+/g).forEach(function(s){o(this).hasClass(s)||i.push(s)},this),i.length&&tt(this,n+(n?" ":"")+i.join(" "))}}):this},hasClass:function Ri(t){return!!t&&V.some.call(this,function(i){return this.test(tt(i))},ii(t))},removeClass:function Oi(t){var i=[];return this.each(function(e){if("className"in this){if(void 0===t)return tt(this,"");i=tt(this),Q(this,t,e,i).split(/\s+/g).forEach(function(n){i=i.replace(ii(n)," ")}),tt(this,i.trim())}})},attr:function Zi(t,i){var e;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(ft(t))for(var a in t)It(this,a,t[a]);else It(this,t,Q(this,i,n,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:void 0},removeAttr:function ji(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(i){It(this,i)},this)})},append:function ue(){return ae(this,arguments,function(t){this.insertBefore(t,null)},!0)},remove:function he(){return this.each(function(){1===this.nodeType&&function re(t){for(var i,e,n=0;void 0!==(e=t[n]);n++)e._zid&&(i=dt[e._zid])&&i.forEach(a=>{const s=a.e+"."+a.ns.split(" ").join(".");At(e,s,a.fn,a.sel)})}(function se(t,i){var e;return e=typeof t.getElementsByTagName<"u"?t.getElementsByTagName(i||"*"):typeof t.querySelectorAll<"u"?t.querySelectorAll(i||"*"):[],void 0===i||i&&function Di(t,i){return t.nodeName&&t.nodeName.toLowerCase()===i.toLowerCase()}(t,i)?o.merge([t],e):e}(this)),null!=this.parentNode&&this.parentNode.removeChild(this)})},empty:function le(){return this.each(function(){this.innerHTML=""})},html:function fe(t){return 0 in arguments?this.each(function(i){var e=this.innerHTML;o(this).empty().append(Q(this,t,i,e))}):0 in this?this[0].innerHTML:null},width:function Gi(t){return ei.call(this,"width",t)},height:function Ki(t){return ei.call(this,"height",t)},scrollTop:function ki(t){if(this.length){var i="scrollTop"in this[0];return void 0===t?i?this[0].scrollTop:lt(this[0])?this[0].pageYOffset:this[0].defaultView.pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function Bi(t){if(this.length){var i="scrollLeft"in this[0];return void 0===t?i?this[0].scrollLeft:lt(this[0])?this[0].pageXOffset:this[0].defaultView.pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},offset:function Ni(t){if(t)return this.each(function(e){var n=o(this),a=Q(this,t,e,n.offset()),s=n.offsetParent().offset(),r={top:a.top-s.top,left:a.left-s.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;if(_.documentElement!==this[0]&&!wt(_.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},offsetParent:function Wi(){return this.map(function(){for(var t=this.offsetParent||_.body;t&&!b.test(t.nodeName)&&"static"==o(t).css("position");)t=t.offsetParent;return t})},position:function Fi(){if(this.length){var i,t=this[0],e=this.offsetParent(),n=b.test(e[0].nodeName)?{top:0,left:0}:e.offset();return"fixed"===o(t).css("position")?i=t.getBoundingClientRect():(i=this.offset(),n.top+=parseFloat(o(e[0]).css("border-top-width"))||0,n.left+=parseFloat(o(e[0]).css("border-left-width"))||0),{top:i.top-n.top-parseFloat(o(t).css("margin-top"))||0,left:i.left-n.left-parseFloat(o(t).css("margin-left"))||0}}},on:function ce(t,i,e,n,a){var s,r,h=this;return t&&!yt(t)?(o.each(t,function(u,f){h.on(u,i,e,f,a)}),h):(!yt(i)&&!q(n)&&!1!==n&&(n=e,e=i,i=void 0),(void 0===n||!1===e)&&(n=e,e=void 0),!1===n&&(n=Rt),h.each(function(u,f){a&&(s=function(g){return At(f,g.type,n),n.apply(this,arguments)}),i&&(r=function(g){var v,l=o(g.target).closest(i,f).get(0);if(l&&l!==f)return v=o.extend(function oe(t){var i,e={originalEvent:t};for(i in t)!Qi.test(i)&&void 0!==t[i]&&(e[i]=t[i]);return ri(e,t)}(g),{currentTarget:l,liveFired:f}),(s||n).apply(l,[v].concat(U.call(arguments,1)))}),function ne(t,i,e,n,a,s,r){var h=gt(t),u=dt[h]||(dt[h]=[]);i.split(/\s/).forEach(function(f){if("ready"==f)return o(_).ready(e);var g=hi(f);g.fn=e,g.sel=a,g.e in ai&&(e=function(l){var w=l.relatedTarget;if(!w||w!==this&&!wt(this,w))return g.fn.apply(this,arguments)}),g.del=s;var v=s||e;g.proxy=function(l){if(!(l=ri(l)).isImmediatePropagationStopped()){l.data=n;var w=v.apply(t,null==l._args?[l]:[l].concat(l._args));return!1===w&&(l.preventDefault(),l.stopPropagation()),w}},g.i=u.length,u.push(g),"addEventListener"in t&&t.addEventListener(fi(g.e),g.proxy,li(g,r))})}(f,t,n,e,i,r||s)}))},off:function de(t,i,e){var n=this;return t&&!yt(t)?(o.each(t,function(a,s){n.off(a,i,s)}),n):(!yt(i)&&!q(e)&&!1!==e&&(e=i,i=void 0),!1===e&&(e=Rt),n.each(function(){At(this,t,e,i)}))},show:function be(t,i){return bi.call(this),void 0===t?t=0:this.css("opacity",0),Nt(this,t,1,"1,1",i)},hide:function xe(t,i){return void 0===t?xi.call(this):function Me(t,i,e,n){return Nt(t,i,0,e,function(){xi.call(o(this)),n&&n.call(this)})}(this,t,"0,0",i)},anim:function we(t,i,e,n,a){var s,h,g,r={},u="",f=this,v=o.fx.transitionEnd,l=!1;if(void 0===i&&(i=o.fx.speeds._default/1e3),void 0===a&&(a=0),o.fx.off&&(i=0),"string"==typeof t)r[vi]=t,r[wi]=i+"s",r[Mi]=a+"s",r[yi]=e||"linear",v=o.fx.animationEnd;else{for(s in h=[],t)me.test(s)?u+=s+"("+t[s]+") ":(r[s]=t[s],h.push(ve(s)));u&&(r[Ot]=u,h.push(Ot)),i>0&&"object"==typeof t&&(r[di]=h.join(", "),r[gi]=i+"s",r[mi]=a+"s",r[pi]=e||"linear")}return g=function(w){if(typeof w<"u"){if(w.target!==w.currentTarget)return;o(w.target).off(v,g)}else o(this).off(v,g);l=!0,o(this).css(Y),n&&n.call(this)},i>0&&(this.on(v,g),setTimeout(function(){l||g.call(f)},1e3*(i+a)+25)),this.size()&&this.get(0),this.css(r),i<=0&&setTimeout(function(){f.each(function(){g.call(this)})},0),this},animate:function ye(t,i,e,n,a){return q(i)&&(n=i,e=void 0,i=void 0),q(e)&&(n=e,e=void 0),ut(i)&&(e=i.easing,n=i.complete,a=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:o.fx.speeds[i]||o.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(t,i,e,n,a)},fadeTo:function ze(t,i,e){return Nt(this,t,i,null,e)},fadeIn:function Te(t,i){var e=this.css("opacity");return e>0?this.css("opacity",0):e=1,bi.call(this).fadeTo(t,e,i)}};o.extend({isPlainObject:ut,isArray:rt,noop:function Pi(){}}),o.fn.extend(Ee);var _e={draggable:!0,resizable:!0,movable:!0,keyboard:!0,title:!0,modalWidth:320,modalHeight:320,fixedModalSize:!1,initMaximized:!1,gapThreshold:.02,ratioThreshold:.1,minRatio:.05,maxRatio:16,headerToolbar:["maximize","close"],footerToolbar:["zoomIn","zoomOut","prev","fullscreen","next","actualSize","rotateRight"],icons:{minimize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M20,14H4V10H20"></path>\n      </svg>',maximize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M4,4H20V20H4V4M6,8V18H18V8H6Z"></path>\n      </svg>',close:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12\n        L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z"></path>\n      </svg>',zoomIn:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43\n        C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5\n        C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5\n        C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z"></path>\n      </svg>',zoomOut:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5\n        A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16\n        C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14\n        C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z"></path>\n      </svg>',prev:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z"></path>\n      </svg>',next:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16,18H18V6H16M6,18L14.5,12L6,6V18Z"></path>\n      </svg>',fullscreen:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M8.5,12.5L11,15.5L14.5,11L19,17H5M23,18V6A2,2 0 0,0 21,4H3\n        A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18Z"></path>\n      </svg>',actualSize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M9.5,13.09L10.91,14.5L6.41,19H10V21H3V14H5V17.59L9.5,13.09\n        M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19\n        H17.59L13.09,14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\n        L13.09,9.5Z"></path>\n      </svg>',rotateLeft:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12\n        C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07\n        M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32\n        M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13\n        M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z"></path>\n      </svg>',rotateRight:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91\n        C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31\n        L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11\n        L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12\n        C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10\n        L15.55,5.55Z"></path>\n      </svg>'},i18n:{minimize:"Minimize",maximize:"Maximize (Alt+X)",close:"Close (Q)",zoomIn:"Zoom-in (+)",zoomOut:"Zoom-out (-)",prev:"Prev (\u2190)",next:"Next (\u2192)",fullscreen:"Fullscreen (F)",actualSize:"Actual-size (Ctrl+Alt+0)",rotateLeft:"Rotate-left (Ctrl+,)",rotateRight:"Rotate-right (Ctrl+.)"},multiInstances:!0,initAnimation:!0,animationDuration:400,animationEasing:"ease-in-out",fixedModalPos:!1,zIndex:1090,dragHandle:null,callbacks:{beforeOpen:o.noop,opened:o.noop,beforeClose:o.noop,closed:o.noop,beforeChange:o.noop,changed:o.noop},index:0,progressiveLoading:!0,appendTo:"body",customButtons:{},positionFixed:!0,initModalPos:null},zi=window.document;function Ft(t,i,e,n){var a=n?t.h:t.w,s=n?t.w:t.h;(s>i.h||a>i.w)&&e.addClass("is-grab"),s<=i.h&&a<=i.w&&e.removeClass("is-grab")}function kt(){return!!("ontouchstart"in window||window.DocumentTouch&&zi instanceof window.DocumentTouch)}function zt(t){return/^(?:body|html)$/i.test(t.nodeName)}function Tt(t,i){return i.reduce(function(e,n){return e+parseFloat(t.css(n))},0)}function pt(t){return"border-box"===t.css("box-sizing")}function Ti(t,i,e,n,a){return a?Math.min(e/i,n/t,1):Math.min(e/t,n/i,1)}var Ct=o(window),j=o(zi),W="click",Bt=kt()?"touchstart":"mousedown",it=kt()?"touchmove":"mousemove",et=kt()?"touchend":"mouseup",p="photoviewer",S="."+p,M="."+p,A={isMoving:!1,isResizing:!1,zIndex:0};var Ei="html, body, .".concat(p,"-modal, .").concat(p,"-stage, .").concat(p,"-button, .").concat(p,"-resizable-handle");var _i="html, body, .".concat(p,"-modal, .").concat(p,"-stage, .").concat(p,"-button");var Wt=function(){function t(i,e){(function ot(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),F(this,"isOpened",!1),F(this,"isMaximized",!1),F(this,"isRotated",!1),F(this,"rotationDegree",0),F(this,"imageData",{}),F(this,"modalData",{width:null,height:null,left:null,top:null}),F(this,"_lastTimestamp",0),this.init(i,e)}return function _t(t,i,e){return i&&P(t.prototype,i),e&&P(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"init",value:function(e,n){this.options=o.extend(!0,{},_e,n),n&&o.isArray(n.footerToolbar)&&(this.options.footerToolbar=n.footerToolbar),n&&o.isArray(n.headerToolbar)&&(this.options.headerToolbar=n.headerToolbar),A.zIndex=0===A.zIndex?this.options.zIndex:A.zIndex,this.open(),this.images=e,this.index=this.options.index,this._loadImage(this.index),this.options.draggable&&this.draggable(this.$photoviewer,this.dragHandle,S+"-button"),this.options.movable&&this.movable(this.$stage,this.$image),this.options.resizable&&this.resizable(this.$photoviewer,this.$stage,this.$image,this.options)}},{key:"_createBtns",value:function(e){var n=this,a=["minimize","maximize","close","zoomIn","zoomOut","prev","next","fullscreen","actualSize","rotateLeft","rotateRight"],s="";return o.each(e,function(r,h){var u="".concat(p,"-button ").concat(p,"-button-").concat(h);a.indexOf(h)>=0?s+='<button class="'.concat(u,'" title="').concat(n.options.i18n[h],'">\n          ').concat(n.options.icons[h],"\n          </button>"):n.options.customButtons[h]&&(s+='<button class="'.concat(u,'" title="').concat(n.options.customButtons[h].title||"",'">\n          ').concat(n.options.customButtons[h].text,"\n          </button>"))}),s}},{key:"_createTitle",value:function(){return this.options.title?'<div class="'.concat(p,'-title"></div>'):""}},{key:"_createTemplate",value:function(){return'<div class="'.concat(p,'-modal" tabindex="0">\n        <div class="').concat(p,'-inner">\n          <div class="').concat(p,'-header">\n            <div class="').concat(p,"-toolbar ").concat(p,'-toolbar-header">\n            ').concat(this._createBtns(this.options.headerToolbar),"\n            </div>\n            ").concat(this._createTitle(),'\n          </div>\n          <div class="').concat(p,'-stage">\n            <img class="').concat(p,'-image" src="" alt="" />\n          </div>\n          <div class="').concat(p,'-footer">\n            <div class="').concat(p,"-toolbar ").concat(p,'-toolbar-footer">\n            ').concat(this._createBtns(this.options.footerToolbar),"\n            </div>\n          </div>\n        </div>\n      </div>")}},{key:"_build",value:function(){var e=this._createTemplate(),n=o(e);this.$photoviewer=n,this.$stage=n.find(S+"-stage"),this.$title=n.find(S+"-title"),this.$image=n.find(S+"-image"),this.$close=n.find(S+"-button-close"),this.$maximize=n.find(S+"-button-maximize"),this.$minimize=n.find(S+"-button-minimize"),this.$zoomIn=n.find(S+"-button-zoomIn"),this.$zoomOut=n.find(S+"-button-zoomOut"),this.$actualSize=n.find(S+"-button-actualSize"),this.$fullscreen=n.find(S+"-button-fullscreen"),this.$rotateLeft=n.find(S+"-button-rotateLeft"),this.$rotateRight=n.find(S+"-button-rotateRight"),this.$prev=n.find(S+"-button-prev"),this.$next=n.find(S+"-button-next"),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.$photoviewer.css("z-index",A.zIndex),this.options.positionFixed&&this.$photoviewer.css({position:"fixed"}),this.dragHandle=this.options.dragHandle&&this.options.dragHandle!==S+"-modal"?this.$photoviewer.find(this.options.dragHandle):this.$photoviewer,o(this.options.appendTo).eq(0).append(this.$photoviewer),this._stageEdgeValue={horizontal:Tt(this.$stage,["left","right","border-left-width","border-right-width"]),vertical:Tt(this.$stage,["top","bottom","border-top-width","border-bottom-width"])},this._modalEdgeValue={horizontal:Tt(this.$photoviewer,["padding-left","padding-right","border-left-width","border-right-width"]),vertical:Tt(this.$photoviewer,["padding-top","padding-bottom","border-top-width","border-bottom-width"])},this._addEvents(),this._addCustomButtonEvents()}},{key:"open",value:function(){this._triggerHook("beforeOpen",this),!this.options.multiInstances&&t.instances.length>0&&t.instances[0].close(),this._build(),this._setInitModalPos(),t.instances.push(this),this._triggerHook("opened",this)}},{key:"close",value:function(){var e=this;this._triggerHook("beforeClose",this),this.$photoviewer.remove(),0===(t.instances=t.instances.filter(function(n){return n!==e})).length&&(A.zIndex=this.options.zIndex,Ct.off("resize"+M)),this._triggerHook("closed",this)}},{key:"_getOffsetParentData",value:function(){var e=o(this.options.appendTo)[0];return{width:this.options.positionFixed||zt(e)?Ct.width():e.clientWidth,height:this.options.positionFixed||zt(e)?Ct.height():e.clientHeight,scrollLeft:this.options.positionFixed?0:zt(e)?j.scrollLeft():e.scrollLeft,scrollTop:this.options.positionFixed?0:zt(e)?j.scrollTop():e.scrollTop}}},{key:"_setModalToCenter",value:function(){var e,n,a,s,r=0,h=0;if(pt(this.$photoviewer)||(r+=this._modalEdgeValue.horizontal,h+=this._modalEdgeValue.vertical),o.isPlainObject(this.options.initModalPos))e=this.options.initModalPos.left,n=this.options.initModalPos.top,a=this.options.initModalPos.right,s=this.options.initModalPos.bottom;else{var u=this._getOffsetParentData();e=(u.width-this.options.modalWidth-r)/2+u.scrollLeft,n=(u.height-this.options.modalHeight-h)/2+u.scrollTop}this.$photoviewer.css({width:this.modalData.width||this.options.modalWidth,height:this.modalData.height||this.options.modalHeight,left:this.modalData.left||e,top:this.modalData.top||n,right:this.modalData.right||a,bottom:this.modalData.bottom||s})}},{key:"_setInitModalPos",value:function(){this.options.initMaximized?(this.maximize(),this.isOpened=!0):this._setModalToCenter(),this.$photoviewer[0].focus()}},{key:"_setModalSize",value:function(){var e=this,n=this.imageData.originalWidth+this._stageEdgeValue.horizontal,a=this.imageData.originalHeight+this._stageEdgeValue.vertical,s=0,r=0;pt(this.$photoviewer)?(n+=this._modalEdgeValue.horizontal,a+=this._modalEdgeValue.vertical):(s+=this._modalEdgeValue.horizontal,r+=this._modalEdgeValue.vertical);var l,w,m,C,h=this._getOffsetParentData(),u=Math.max(this.options.gapThreshold,0)+1,f=Math.min(h.width/((n+s)*u),h.height/((a+r)*u),1),g=Math.max(n*f,this.options.modalWidth),v=Math.max(a*f,this.options.modalHeight);g=this.options.fixedModalSize?this.options.modalWidth:Math.round(g),v=this.options.fixedModalSize?this.options.modalHeight:Math.round(v),o.isPlainObject(this.options.initModalPos)?(l=this.options.initModalPos.left,w=this.options.initModalPos.top,m=this.options.initModalPos.right,C=this.options.initModalPos.bottom):(l=(h.width-g-s)/2+h.scrollLeft,w=(h.height-v-r)/2+h.scrollTop);var c={width:g,height:v,left:l,top:w,right:m,bottom:C};this.options.initAnimation?this.$photoviewer.animate(c,this.options.animationDuration,this.options.animationEasing,function(){e._setImageSize()}):(this.$photoviewer.css(c),this._setImageSize()),this.isOpened=!0}},{key:"_setImageSize",value:function(){var e=this.$stage.width(),n=this.$stage.height(),a=this.imageData,s=a.originalWidth,r=a.originalHeight,h=Ti(s,r,e,n,this.isRotated),u=s*h,f=r*h;this.$image.css({width:Math.round(u),height:Math.round(f),left:(e-Math.round(u))/2,top:(n-Math.round(f))/2}),o.extend(this.imageData,{initWidth:u,initHeight:f,initLeft:(e-u)/2,initTop:(n-f)/2,width:u,height:f,left:(e-u)/2,top:(n-f)/2}),Ft({w:u,h:f},{w:e,h:n},this.$stage,this.isRotated),this.imageLoaded||(this.$photoviewer.find(S+"-loader").remove(),this.$stage.removeClass("stage-ready"),this.$image.removeClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0)}},{key:"_loadImage",value:function(e,n,a){var s,r=this,h=null===(s=this.images[e])||void 0===s?void 0:s.src;h&&(this.$image.removeAttr("style").attr("src",""),this.isRotated=!1,this.rotationDegree=0,this.imageLoaded=!1,this.$photoviewer.append('<div class="'.concat(p,'-loader"></div>')),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),this.$image.attr("src",h),function Le(t,i,e){var n=new Image;n.onload=function(){i(n)},n.onerror=function(){e(n)},n.src=t}(h,function(u){r.imageData={originalWidth:u.width,originalHeight:u.height},r.isMaximized||r.isOpened&&r.options.fixedModalPos?r._setImageSize():r._setModalSize(),n&&n.call()},function(){r.$photoviewer.find(S+"-loader").remove(),a&&a.call()}),this.options.title&&h&&this._setImageTitle(h))}},{key:"_setImageTitle",value:function(e){var n=this.images[this.index].title||function $e(t){return t.replace(/^.*?\/*([^/?]*)\.[a-z]+(\?.+|$)/gi,"$1")}(e);this.$title.html(n)}},{key:"jump",value:function(e){this._triggerHook("beforeChange",[this,this.index]);var n=Date.now();n-this._lastTimestamp>=this.options.animationDuration&&(this.index=this.index+e,this.jumpTo(this.index),this._lastTimestamp=n)}},{key:"jumpTo",value:function(e){var n=this;(e%=this.images.length)>=0?e%=this.images.length:e<0&&(e=(this.images.length+e)%this.images.length),this.index=e,this._loadImage(e,function(){n._triggerHook("changed",[n,e])},function(){n._triggerHook("changed",[n,e])})}},{key:"_wheel",value:function(e){e.preventDefault();var n=1;e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1);var a=-n*this.options.ratioThreshold,s={x:e.clientX-this.$stage.offset().left+j.scrollLeft(),y:e.clientY-this.$stage.offset().top+j.scrollTop()};this.zoom(a,s)}},{key:"zoom",value:function(e,n){e=e<0?1/(1-e):1+e,!((e=this.$image.width()/this.imageData.originalWidth*e)>this.options.maxRatio||e<this.options.minRatio)&&this.zoomTo(e,n)}},{key:"zoomTo",value:function(e,n){var a=this.imageData,s=a.originalWidth,r=a.originalHeight,h=a.width,u=a.height,f=a.left,g=a.top,v=a.initWidth,l=this.$stage.width(),w=this.$stage.height();void 0===n&&(n={x:l/2,y:w/2});var m=s*e,C=r*e,c=n.x-(n.x-f)/h*m,z=n.y-(n.y-g)/u*C,E=this.isRotated?(m-C)/2:0,d=this.isRotated?C:m,I=this.isRotated?m:C,X=l-m,nt=w-C;c=d<=l?X/2:c>-E?-E:Math.max(c,X+E),z=I<=w?nt/2:z>E?E:Math.max(z,nt-E),Math.abs(v-m)<.05*v?this._setImageSize():(this.$image.css({width:Math.round(m),height:Math.round(C),left:Math.round(c),top:Math.round(z)}),Ft({w:Math.round(d),h:Math.round(I)},{w:l,h:w},this.$stage)),o.extend(this.imageData,{width:m,height:C,left:c,top:z})}},{key:"rotate",value:function(e){this.rotationDegree=this.rotationDegree+e,this.isRotated=this.rotationDegree/90%2!=0,this.rotateTo(this.rotationDegree)}},{key:"rotateTo",value:function(e){this.$image.css({transform:"rotate("+e+"deg)"}),this._setImageSize()}},{key:"maximize",value:function(){this.$photoviewer.addClass(p+"-maximized"),this.$photoviewer.css({width:"auto",height:"auto",top:0,right:0,bottom:0,left:0}),this.isMaximized=!0}},{key:"exitMaximize",value:function(){this.$photoviewer.removeClass(p+"-maximized"),this._setModalToCenter(),this.isMaximized=!1}},{key:"toggleMaximize",value:function(){if(this.isMaximized)this.exitMaximize();else{var e=this.$photoviewer.width(),n=this.$photoviewer.height();pt(this.$photoviewer)&&(e+=this._modalEdgeValue.horizontal,n+=this._modalEdgeValue.vertical),this.modalData={width:e,height:n,left:parseFloat(this.$photoviewer.css("left")),top:parseFloat(this.$photoviewer.css("top"))},this.maximize()}this._setImageSize(),this.$photoviewer[0].focus()}},{key:"fullscreen",value:function(){(function Se(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()})(this.$photoviewer[0]),this.$photoviewer[0].focus()}},{key:"resize",value:function(){this.isOpened&&(this.isMaximized?this._setImageSize():this._setModalSize())}},{key:"_keydown",value:function(e){if(this.options.keyboard){e.preventDefault();var a=e.ctrlKey||e.metaKey,s=e.altKey;switch(e.keyCode||e.which||e.charCode){case 37:this.jump(-1);break;case 39:this.jump(1);break;case 187:case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e);break;case 189:case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e);break;case 48:a&&s&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},e);break;case 188:a&&this.rotate(-90);break;case 190:a&&this.rotate(90);break;case 81:this.close();break;case 88:s&&this.toggleMaximize();break;case 70:this.fullscreen()}}}},{key:"_addEvents",value:function(){var e=this;this.$close.on(W+M,function(){e.close()}),this.$stage.on("wheel mousewheel DOMMouseScroll"+M,function(n){e._wheel(n)}),this.$zoomIn.on(W+M,function(){e.zoom(3*e.options.ratioThreshold)}),this.$zoomOut.on(W+M,function(){e.zoom(3*-e.options.ratioThreshold)}),this.$actualSize.on(W+M,function(){e.zoomTo(1)}),this.$prev.on(W+M,function(){e.jump(-1)}),this.$next.on(W+M,function(){e.jump(1)}),this.$rotateLeft.on(W+M,function(){e.rotate(-90)}),this.$rotateRight.on(W+M,function(){e.rotate(90)}),this.$maximize.on(W+M,function(){e.toggleMaximize()}),this.$fullscreen.on(W+M,function(){e.fullscreen()}),this.$photoviewer.on("keydown"+M,function(n){e._keydown(n)}),Ct.on("resize"+M,function He(t,i){var e=null;return function(){var n=this,a=arguments;clearTimeout(e),e=setTimeout(function(){t.apply(n,a)},i)}}(function(){return e.resize()},500))}},{key:"_addCustomButtonEvents",value:function(){var e=this,n=function(r){e.$photoviewer.find(S+"-button-"+r).on(W+M,function(h){e.options.customButtons[r].click.apply(e,[e,h])})};for(var a in this.options.customButtons)n(a)}},{key:"_triggerHook",value:function(e,n){this.options.callbacks[e]&&this.options.callbacks[e].apply(this,o.isArray(n)?n:[n])}}]),t}();return F(Wt,"instances",[]),o.extend(Wt.prototype,{draggable:function Pe(t,i,e){var n=this,a=0,s=0,r=0,h=0,f=function(l){(l=l||window.event).preventDefault(),A.isMoving||A.isResizing||n.isMaximized||t.css({left:("touchmove"===l.type?l.targetTouches[0].pageX:l.clientX)-a+r,top:("touchmove"===l.type?l.targetTouches[0].pageY:l.clientY)-s+h})},g=function v(){j.off(it+M,f).off(et+M,v),t[0].focus()};o(i).on(Bt+M,function(l){if(l=l||window.event,t[0].blur(),o(l.target).closest(e).length)return!0;n.options.multiInstances&&t.css("z-index",++A.zIndex),a="touchstart"===l.type?l.targetTouches[0].pageX:l.clientX,s="touchstart"===l.type?l.targetTouches[0].pageY:l.clientY,r=parseFloat(t.css("left")),h=parseFloat(t.css("top")),t.css({left:r,top:h,right:"",bottom:""}),j.on(it+M,f).on(et+M,g)})}},{movable:function Ie(t,i){var e=this,n=0,a=0,s=0,r=0,h=0,u=0,f=0,v=function(m){(m=m||window.event).preventDefault();var z=("touchmove"===m.type?m.targetTouches[0].pageX:m.clientX)-n,E=("touchmove"===m.type?m.targetTouches[0].pageY:m.clientY)-a,d=z+s,I=E+r;u>0?E+r>f?I=f:E+r<-u+f&&(I=-u+f):I=r,h>0?z+s>-f?d=-f:z+s<-h-f&&(d=-h-f):d=s,i.css({left:d,top:I}),o.extend(e.imageData,{left:d,top:I})},l=function w(){j.off(it+M,v).off(et+M,w),A.isMoving=!1,o(Ei).removeClass("is-grabbing")};t.on(Bt+M,function(m){(m=m||window.event).preventDefault();var C=i.width(),c=i.height(),z=t.width(),E=t.height();n="touchstart"===m.type?m.targetTouches[0].pageX:m.clientX,a="touchstart"===m.type?m.targetTouches[0].pageY:m.clientY,f=e.isRotated?(C-c)/2:0,u=e.isRotated?C-E:c-E,A.isMoving=(h=e.isRotated?c-z:C-z)>0||u>0,s=i.position().left-f,r=i.position().top+f,t.hasClass("is-grab")&&o(Ei).addClass("is-grabbing"),j.on(it+M,v).on(et+M,l)})}},{resizable:function Re(t,i,e,n){var a=this,s=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-e"></div>')),r=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-w"></div>')),h=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-s"></div>')),u=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-n"></div>')),f=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-se"></div>')),g=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-sw"></div>')),v=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-ne"></div>')),l=o('<div class="'.concat(p,"-resizable-handle ").concat(p,'-resizable-handle-nw"></div>')),w={e:s,s:h,se:f,n:u,w:r,nw:l,ne:v,sw:g};t.append(s,r,h,u,f,g,v,l);var m=0,C=0,c={w:0,h:0,x:0,y:0},z={w:0,h:0,x:0,y:0},E={w:0,h:0,x:0,y:0},d=0,I=0,X=0,nt="",O=n.modalWidth,N=n.modalHeight,Hi=function(T){if((T=T||window.event).preventDefault(),!a.isMaximized){var H=("touchmove"===T.type?T.targetTouches[0].pageX:T.clientX)-m,L=("touchmove"===T.type?T.targetTouches[0].pageY:T.clientY)-C,D=function(T,y,$){var H=-y+c.w>O?y+c.x:c.x+c.w-O,L=-$+c.h>N?$+c.y:c.y+c.h-N;return{e:{width:Math.max(y+c.w,O)},s:{height:Math.max($+c.h,N)},se:{width:Math.max(y+c.w,O),height:Math.max($+c.h,N)},w:{width:Math.max(-y+c.w,O),left:H},n:{height:Math.max(-$+c.h,N),top:L},nw:{width:Math.max(-y+c.w,O),height:Math.max(-$+c.h,N),top:L,left:H},ne:{width:Math.max(y+c.w,O),height:Math.max(-$+c.h,N),top:L},sw:{width:Math.max(-y+c.w,O),height:Math.max($+c.h,N),left:H}}[T]}(nt,H,L);t.css(D);var R=function(T,y,$){var H=y+c.w>O?z.w-I+y-d:O-(c.w-z.w)-I-d,L=$+c.h>N?z.h-X+$+d:N-(c.h-z.h)-X+d,D=-y+c.w>O?z.w-I-y-d:O-(c.w-z.w)-I-d,R=-$+c.h>N?z.h-X-$+d:N-(c.h-z.h)-X+d,K=e.position().left,Et=e.position().top,Zt=(H>0?K:Math.min(K,0))-d,jt=(L>0?Et:Math.min(Et,0))+d,Yt=(D>0?K:Math.min(K,0))-d,Xt=(R>0?Et:Math.min(Et,0))+d;return{e:{left:H>=-d?(H-d)/2:Math.max(Zt,H)},s:{top:L>=d?(L+d)/2:Math.max(jt,L)},se:{top:L>=d?(L+d)/2:Math.max(jt,L),left:H>=-d?(H-d)/2:Math.max(Zt,H)},w:{left:D>=-d?(D-d)/2:Math.max(Yt,D)},n:{top:R>=d?(R+d)/2:Math.max(Xt,R)},nw:{top:R>=d?(R+d)/2:Math.max(Xt,R),left:D>=-d?(D-d)/2:Math.max(Yt,D)},ne:{top:R>=d?(R+d)/2:Math.max(Xt,R),left:H>=-d?(H-d)/2:Math.max(Zt,H)},sw:{top:L>=d?(L+d)/2:Math.max(jt,L),left:D>=-d?(D-d)/2:Math.max(Yt,D)}}[T]}(nt,H,L);e.css(R)}},Fe=function G(){j.off(it+M,Hi).off(et+M,G);var T=i.width(),y=i.height();A.isResizing&&Ft({w:I,h:X},{w:T,h:y},i),A.isResizing=!1,o(_i).css("cursor","");var $=a.imageData,H=$.originalWidth,L=$.originalHeight,D=Ti(H,L,T,y,a.isRotated),R=H*D,K=L*D;o.extend(a.imageData,{initWidth:R,initHeight:K,initLeft:(T-R)/2,initTop:(y-K)/2})};o.each(w,function(G,T){T.on(Bt+M,function(y){!function(T,y){(y=y||window.event).preventDefault(),A.isResizing=!0,m="touchstart"===y.type?y.targetTouches[0].pageX:y.clientX,C="touchstart"===y.type?y.targetTouches[0].pageY:y.clientY,c={w:t.width()+(pt(t)?a._modalEdgeValue.horizontal:0),h:t.height()+(pt(t)?a._modalEdgeValue.vertical:0),x:t.position().left,y:t.position().top},z={w:i.width(),h:i.height(),x:i.position().left,y:i.position().top},E={w:e.width(),h:e.height(),x:e.position().left,y:e.position().top},d=a.isRotated?(E.w-E.h)/2:0,I=a.isRotated?E.h:E.w,X=a.isRotated?E.w:E.h,nt=T,o(_i).css("cursor",T+"-resize"),j.on(it+M,Hi).on(et+M,Fe)}(G,y)})})}}),Wt}()}}]);